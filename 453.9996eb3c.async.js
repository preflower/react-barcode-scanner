!(function(){var Ne=(C,k,l)=>new Promise((O,S)=>{var D=Z=>{try{I(l.next(Z))}catch(H){S(H)}},j=Z=>{try{I(l.throw(Z))}catch(H){S(H)}},I=Z=>Z.done?O(Z.value):Promise.resolve(Z.value).then(D,j);I((l=l.apply(C,k)).next())});(self.webpackChunkreact_barcode_scanner=self.webpackChunkreact_barcode_scanner||[]).push([[453],{34453:function(C,k,l){"use strict";l.r(k),l.d(k,{BarcodeScanner:function(){return Je},useCamera:function(){return _e},useScanning:function(){return ve},useStreamState:function(){return ae},useTorch:function(){return Ye}});var O=l(14224);function S(n,t,r,a){return new(r||(r=Promise))(function(e,u){function h(m){try{d(a.next(m))}catch(c){u(c)}}function p(m){try{d(a.throw(m))}catch(c){u(c)}}function d(m){var c;m.done?e(m.value):(c=m.value,c instanceof r?c:new r(function(R){R(c)})).then(h,p)}d((a=a.apply(n,t||[])).next())})}var D,j=(D="file:///home/runner/work/react-barcode-scanner/react-barcode-scanner/node_modules/.pnpm/@undecaf+zbar-wasm@0.9.13/node_modules/@undecaf/zbar-wasm/dist/main.js",function(n){return Ne(this,null,function*(){var t,r,a=n||{},e=a!==void 0?a:{};e.ready=new Promise(function(s,o){t=s,r=o});var u,h,p,d=Object.assign({},e),m=typeof window=="object",c=typeof importScripts=="function",R=typeof O=="object"&&typeof O.versions=="object"&&typeof O.versions.node=="string",A="";if(R){const{createRequire:s}=yield l.e(22).then(l.bind(l,80022));var T=s("file:///home/runner/work/react-barcode-scanner/react-barcode-scanner/node_modules/.pnpm/@undecaf+zbar-wasm@0.9.13/node_modules/@undecaf/zbar-wasm/dist/main.js"),b=T("fs"),F=T("path");A=c?F.dirname(A)+"/":T("url").fileURLToPath(new URL(l(36635),l.b)),u=(o,g)=>(o=ee(o)?new URL(o):F.normalize(o),b.readFileSync(o,g?void 0:"utf8")),p=o=>{var g=u(o,!0);return g.buffer||(g=new Uint8Array(g)),g},h=(o,g,v)=>{o=ee(o)?new URL(o):F.normalize(o),b.readFile(o,function(_,y){_?v(_):g(y.buffer)})},O.argv.length>1&&O.argv[1].replace(/\\/g,"/"),O.argv.slice(2),O.on("uncaughtException",function(o){if(!(o instanceof qe))throw o}),O.on("unhandledRejection",function(o){throw o}),e.inspect=function(){return"[Emscripten Module object]"}}else(m||c)&&(c?A=self.location.href:typeof document!="undefined"&&document.currentScript&&(A=document.currentScript.src),D&&(A=D),A=A.indexOf("blob:")!==0?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",u=s=>{var o=new XMLHttpRequest;return o.open("GET",s,!1),o.send(null),o.responseText},c&&(p=s=>{var o=new XMLHttpRequest;return o.open("GET",s,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),h=(s,o,g)=>{var v=new XMLHttpRequest;v.open("GET",s,!0),v.responseType="arraybuffer",v.onload=()=>{v.status==200||v.status==0&&v.response?o(v.response):g()},v.onerror=g,v.send(null)});var B,E,$=e.print||console.log.bind(console),U=e.printErr||console.warn.bind(console);Object.assign(e,d),d=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(B=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&se("no native wasm support detected");var Q,N,Re=!1,ye=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function Be(){var s=E.buffer;e.HEAP8=new Int8Array(s),e.HEAP16=new Int16Array(s),e.HEAP32=new Int32Array(s),e.HEAPU8=Q=new Uint8Array(s),e.HEAPU16=new Uint16Array(s),e.HEAPU32=N=new Uint32Array(s),e.HEAPF32=new Float32Array(s),e.HEAPF64=new Float64Array(s)}e.INITIAL_MEMORY;var P,ie,Ee=[],we=[],Se=[],X=0,V=null;function se(s){e.onAbort&&e.onAbort(s),U(s="Aborted("+s+")"),Re=!0,s+=". Build with -sASSERTIONS for more info.";var o=new WebAssembly.RuntimeError(s);throw r(o),o}function be(s){return s.startsWith("data:application/octet-stream;base64,")}function ee(s){return s.startsWith("file://")}function Ce(s){try{if(s==P&&B)return new Uint8Array(B);if(p)return p(s);throw"both async and sync fetching of the wasm failed"}catch(o){se(o)}}function qe(s){this.name="ExitStatus",this.message="Program terminated with exit("+s+")",this.status=s}function oe(s){for(;s.length>0;)s.shift()(e)}function et(s){var o=E.buffer;try{return E.grow(s-o.byteLength+65535>>>16),Be(),1}catch(g){}}e.locateFile?be(P="zbar.wasm")||(ie=P,P=e.locateFile?e.locateFile(ie,A):A+ie):P=new URL(l(55996),l.b).href;var tt=[null,[],[]];function nt(s,o){var g=tt[s];o===0||o===10?((s===1?$:U)(function(v,_,y){for(var G=_+y,x=_;v[x]&&!(x>=G);)++x;if(x-_>16&&v.buffer&&ye)return ye.decode(v.subarray(_,x));for(var Y="";_<x;){var M=v[_++];if(128&M){var ce=63&v[_++];if((224&M)!=192){var Ze=63&v[_++];if((M=(240&M)==224?(15&M)<<12|ce<<6|Ze:(7&M)<<18|ce<<12|Ze<<6|63&v[_++])<65536)Y+=String.fromCharCode(M);else{var Te=M-65536;Y+=String.fromCharCode(55296|Te>>10,56320|1023&Te)}}else Y+=String.fromCharCode((31&M)<<6|ce)}else Y+=String.fromCharCode(M)}return Y}(g,0)),g.length=0):g.push(o)}var te,rt={d:function(){return!0},e:function(){return Date.now()},c:function(s){var o,g,v=Q.length,_=2147483648;if((s>>>=0)>_)return!1;for(var y=1;y<=4;y*=2){var G=v*(1+.2/y);if(G=Math.min(G,s+100663296),et(Math.min(_,(o=Math.max(s,G))+((g=65536)-o%g)%g)))return!0}return!1},f:function(s){return 52},b:function(s,o,g,v,_){return 70},a:function(s,o,g,v){for(var _=0,y=0;y<g;y++){var G=N[o>>2],x=N[o+4>>2];o+=8;for(var Y=0;Y<x;Y++)nt(s,Q[G+Y]);_+=x}return N[v>>2]=_,0}};function Ie(s){function o(){te||(te=!0,e.calledRun=!0,Re||(oe(we),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)g=e.postRun.shift(),Se.unshift(g);var g;oe(Se)}()))}X>0||(function(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)g=e.preRun.shift(),Ee.unshift(g);var g;oe(Ee)}(),X>0||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),o()},1)):o()))}if(function(){var s={a:rt};function o(_,y){var G,x=_.exports;e.asm=x,E=e.asm.g,Be(),e.asm.s,G=e.asm.h,we.unshift(G),function(Y){if(X--,e.monitorRunDependencies&&e.monitorRunDependencies(X),X==0&&V){var M=V;V=null,M()}}()}function g(_){o(_.instance)}function v(_){return function(){if(!B&&(m||c)){if(typeof fetch=="function"&&!ee(P))return fetch(P,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+P+"'";return y.arrayBuffer()}).catch(function(){return Ce(P)});if(h)return new Promise(function(y,G){h(P,function(x){y(new Uint8Array(x))},G)})}return Promise.resolve().then(function(){return Ce(P)})}().then(function(y){return WebAssembly.instantiate(y,s)}).then(function(y){return y}).then(_,function(y){U("failed to asynchronously prepare wasm: "+y),se(y)})}if(X++,e.monitorRunDependencies&&e.monitorRunDependencies(X),e.instantiateWasm)try{return e.instantiateWasm(s,o)}catch(_){U("Module.instantiateWasm callback failed with error: "+_),r(_)}(B||typeof WebAssembly.instantiateStreaming!="function"||be(P)||ee(P)||R||typeof fetch!="function"?v(g):fetch(P,{credentials:"same-origin"}).then(function(_){return WebAssembly.instantiateStreaming(_,s).then(g,function(y){return U("wasm streaming compile failed: "+y),U("falling back to ArrayBuffer instantiation"),v(g)})})).catch(r)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.h).apply(null,arguments)},e._ImageScanner_create=function(){return(e._ImageScanner_create=e.asm.i).apply(null,arguments)},e._ImageScanner_destory=function(){return(e._ImageScanner_destory=e.asm.j).apply(null,arguments)},e._ImageScanner_set_config=function(){return(e._ImageScanner_set_config=e.asm.k).apply(null,arguments)},e._ImageScanner_enable_cache=function(){return(e._ImageScanner_enable_cache=e.asm.l).apply(null,arguments)},e._ImageScanner_recycle_image=function(){return(e._ImageScanner_recycle_image=e.asm.m).apply(null,arguments)},e._ImageScanner_get_results=function(){return(e._ImageScanner_get_results=e.asm.n).apply(null,arguments)},e._ImageScanner_scan=function(){return(e._ImageScanner_scan=e.asm.o).apply(null,arguments)},e._Image_create=function(){return(e._Image_create=e.asm.p).apply(null,arguments)},e._Image_destory=function(){return(e._Image_destory=e.asm.q).apply(null,arguments)},e._Image_get_symbols=function(){return(e._Image_get_symbols=e.asm.r).apply(null,arguments)},e._free=function(){return(e._free=e.asm.t).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.u).apply(null,arguments)},V=function s(){te||Ie(),te||(V=s)},e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Ie(),a.ready})});let I;const Z=S(void 0,void 0,void 0,function*(){if(I=yield j(),!I)throw Error("WASM was not loaded");return I}),H=()=>S(void 0,void 0,void 0,function*(){return yield Z});var f,J,ue;(function(n){n[n.ZBAR_NONE=0]="ZBAR_NONE",n[n.ZBAR_PARTIAL=1]="ZBAR_PARTIAL",n[n.ZBAR_EAN2=2]="ZBAR_EAN2",n[n.ZBAR_EAN5=5]="ZBAR_EAN5",n[n.ZBAR_EAN8=8]="ZBAR_EAN8",n[n.ZBAR_UPCE=9]="ZBAR_UPCE",n[n.ZBAR_ISBN10=10]="ZBAR_ISBN10",n[n.ZBAR_UPCA=12]="ZBAR_UPCA",n[n.ZBAR_EAN13=13]="ZBAR_EAN13",n[n.ZBAR_ISBN13=14]="ZBAR_ISBN13",n[n.ZBAR_COMPOSITE=15]="ZBAR_COMPOSITE",n[n.ZBAR_I25=25]="ZBAR_I25",n[n.ZBAR_DATABAR=34]="ZBAR_DATABAR",n[n.ZBAR_DATABAR_EXP=35]="ZBAR_DATABAR_EXP",n[n.ZBAR_CODABAR=38]="ZBAR_CODABAR",n[n.ZBAR_CODE39=39]="ZBAR_CODE39",n[n.ZBAR_PDF417=57]="ZBAR_PDF417",n[n.ZBAR_QRCODE=64]="ZBAR_QRCODE",n[n.ZBAR_SQCODE=80]="ZBAR_SQCODE",n[n.ZBAR_CODE93=93]="ZBAR_CODE93",n[n.ZBAR_CODE128=128]="ZBAR_CODE128",n[n.ZBAR_SYMBOL=255]="ZBAR_SYMBOL",n[n.ZBAR_ADDON2=512]="ZBAR_ADDON2",n[n.ZBAR_ADDON5=1280]="ZBAR_ADDON5",n[n.ZBAR_ADDON=1792]="ZBAR_ADDON"})(f||(f={})),function(n){n[n.ZBAR_CFG_ENABLE=0]="ZBAR_CFG_ENABLE",n[n.ZBAR_CFG_ADD_CHECK=1]="ZBAR_CFG_ADD_CHECK",n[n.ZBAR_CFG_EMIT_CHECK=2]="ZBAR_CFG_EMIT_CHECK",n[n.ZBAR_CFG_ASCII=3]="ZBAR_CFG_ASCII",n[n.ZBAR_CFG_BINARY=4]="ZBAR_CFG_BINARY",n[n.ZBAR_CFG_NUM=5]="ZBAR_CFG_NUM",n[n.ZBAR_CFG_MIN_LEN=32]="ZBAR_CFG_MIN_LEN",n[n.ZBAR_CFG_MAX_LEN=33]="ZBAR_CFG_MAX_LEN",n[n.ZBAR_CFG_UNCERTAINTY=64]="ZBAR_CFG_UNCERTAINTY",n[n.ZBAR_CFG_POSITION=128]="ZBAR_CFG_POSITION",n[n.ZBAR_CFG_TEST_INVERTED=129]="ZBAR_CFG_TEST_INVERTED",n[n.ZBAR_CFG_X_DENSITY=256]="ZBAR_CFG_X_DENSITY",n[n.ZBAR_CFG_Y_DENSITY=257]="ZBAR_CFG_Y_DENSITY"}(J||(J={})),function(n){n[n.ZBAR_ORIENT_UNKNOWN=-1]="ZBAR_ORIENT_UNKNOWN",n[n.ZBAR_ORIENT_UP=0]="ZBAR_ORIENT_UP",n[n.ZBAR_ORIENT_RIGHT=1]="ZBAR_ORIENT_RIGHT",n[n.ZBAR_ORIENT_DOWN=2]="ZBAR_ORIENT_DOWN",n[n.ZBAR_ORIENT_LEFT=3]="ZBAR_ORIENT_LEFT"}(ue||(ue={}));class fe{constructor(t,r){this.ptr=t,this.inst=r}checkAlive(){if(!this.ptr)throw Error("Call after destroyed")}getPointer(){return this.checkAlive(),this.ptr}}class le{constructor(t,r){this.ptr=t,this.ptr32=t>>2,this.buf=r,this.HEAP8=new Int8Array(r),this.HEAPU32=new Uint32Array(r),this.HEAP32=new Int32Array(r)}}class ne extends le{get type(){return this.HEAPU32[this.ptr32]}get data(){const t=this.HEAPU32[this.ptr32+4],r=this.HEAPU32[this.ptr32+5];return Int8Array.from(this.HEAP8.subarray(r,r+t))}get points(){const t=this.HEAPU32[this.ptr32+7],r=this.HEAPU32[this.ptr32+8]>>2,a=[];for(let e=0;e<t;++e){const u=this.HEAP32[r+2*e],h=this.HEAP32[r+2*e+1];a.push({x:u,y:h})}return a}get orientation(){return this.HEAP32[this.ptr32+9]}get next(){const t=this.HEAPU32[this.ptr32+11];return t?new ne(t,this.buf):null}get time(){return this.HEAPU32[this.ptr32+13]}get cacheCount(){return this.HEAP32[this.ptr32+14]}get quality(){return this.HEAP32[this.ptr32+15]}}class Oe extends le{get head(){const t=this.HEAPU32[this.ptr32+2];return t?new ne(t,this.buf):null}}class q{constructor(t){this.type=t.type,this.typeName=f[this.type],this.data=t.data,this.points=t.points,this.orientation=t.orientation,this.time=t.time,this.cacheCount=t.cacheCount,this.quality=t.quality}static createSymbolsFromPtr(t,r){if(t==0)return[];let a=new Oe(t,r).head;const e=[];for(;a!==null;)e.push(new q(a)),a=a.next;return e}decode(t){return new TextDecoder(t).decode(this.data)}}class de extends fe{static createFromGrayBuffer(t,r,a,e=0){return S(this,void 0,void 0,function*(){const u=yield H(),h=new Uint8Array(a),p=t*r;if(p!==h.byteLength)throw Error("dataBuf does not match width and height");const d=u._malloc(p);return u.HEAPU8.set(h,d),new this(u._Image_create(t,r,808466521,d,p,e),u)})}static createFromRGBABuffer(t,r,a,e=0){return S(this,void 0,void 0,function*(){const u=yield H(),h=new Uint8Array(a),p=t*r;if(4*p!==h.byteLength)throw Error("dataBuf does not match width and height");const d=u._malloc(p),m=d+p,c=u.HEAPU8;for(let R=d,A=0;R<m;R++,A+=4)c[R]=19595*h[A]+38469*h[A+1]+7472*h[A+2]>>16;return new this(u._Image_create(t,r,808466521,d,p,e),u)})}destroy(){this.checkAlive(),this.inst._Image_destory(this.ptr),this.ptr=0}getSymbols(){this.checkAlive();const t=this.inst._Image_get_symbols(this.ptr);return q.createSymbolsFromPtr(t,this.inst.HEAPU8.buffer)}}class me extends fe{static create(){return S(this,void 0,void 0,function*(){const t=yield H();return new this(t._ImageScanner_create(),t)})}destroy(){this.checkAlive(),this.inst._ImageScanner_destory(this.ptr),this.ptr=0}setConfig(t,r,a){return this.checkAlive(),this.inst._ImageScanner_set_config(this.ptr,t,r,a)}enableCache(t=!0){this.checkAlive(),this.inst._ImageScanner_enable_cache(this.ptr,t)}recycleImage(t){this.checkAlive(),this.inst._ImageScanner_recycle_image(this.ptr,t.getPointer())}getResults(){this.checkAlive();const t=this.inst._ImageScanner_get_results(this.ptr);return q.createSymbolsFromPtr(t,this.inst.HEAPU8.buffer)}scan(t){return this.checkAlive(),this.inst._ImageScanner_scan(this.ptr,t.getPointer())}}const he=me.create(),at=()=>S(void 0,void 0,void 0,function*(){return yield he}),Ae=(n,t)=>S(void 0,void 0,void 0,function*(){t===void 0&&(t=yield he);const r=t.scan(n);if(r<0)throw Error("Scan Failed");return r===0?[]:n.getSymbols()}),it=(n,t,r,a)=>S(void 0,void 0,void 0,function*(){const e=yield de.createFromGrayBuffer(t,r,n),u=yield Ae(e,a);return e.destroy(),u}),pe=(n,t,r,a)=>S(void 0,void 0,void 0,function*(){const e=yield de.createFromRGBABuffer(t,r,n),u=yield Ae(e,a);return e.destroy(),u}),st=(n,t)=>S(void 0,void 0,void 0,function*(){return yield pe(n.data.buffer,n.width,n.height,t)});function De(n,t,r,a){return new(r||(r=Promise))(function(e,u){function h(m){try{d(a.next(m))}catch(c){u(c)}}function p(m){try{d(a.throw(m))}catch(c){u(c)}}function d(m){var c;m.done?e(m.value):(c=m.value,c instanceof r?c:new r(function(R){R(c)})).then(h,p)}d((a=a.apply(n,t||[])).next())})}class i{constructor(t,r=J.ZBAR_CFG_ENABLE,a=1){this.symbolType=t,this.configType=r,this.number=a,this.configSteps=[this]}static register(t,r,a=r.symbolType){return i.formatsToConfigs[t]=r,i.typesToFormats[a]=i.typesToFormats[a]||t,r}static formats(){return Object.keys(i.formatsToConfigs)}static toFormat(t){return i.typesToFormats[t]}static configure(t,r){var a;(a=i.formatsToConfigs[r])===null||a===void 0||a.configSteps.forEach(e=>t.setConfig(e.symbolType,e.configType,e.number))}add(t){return this.configSteps.push(t),this}}var ge;i.formatsToConfigs={},i.typesToFormats={},i.register("codabar",new i(f.ZBAR_CODABAR)),i.register("code_39",new i(f.ZBAR_CODE39)),i.register("code_93",new i(f.ZBAR_CODE93)),i.register("code_128",new i(f.ZBAR_CODE128)),i.register("databar",new i(f.ZBAR_DATABAR)),i.register("databar_exp",new i(f.ZBAR_DATABAR_EXP)),i.register("ean_2",new i(f.ZBAR_EAN2)),i.register("ean_5",new i(f.ZBAR_EAN5)),i.register("ean_8",new i(f.ZBAR_EAN8)),i.register("ean_13",new i(f.ZBAR_EAN13)),i.register("ean_13+2",new i(f.ZBAR_EAN13)).add(new i(f.ZBAR_EAN2)),i.register("ean_13+5",new i(f.ZBAR_EAN13)).add(new i(f.ZBAR_EAN5)),i.register("isbn_10",new i(f.ZBAR_ISBN10)).add(new i(f.ZBAR_EAN13)),i.register("isbn_13",new i(f.ZBAR_ISBN13)).add(new i(f.ZBAR_EAN13)),i.register("isbn_13+2",new i(f.ZBAR_ISBN13)).add(new i(f.ZBAR_EAN13)).add(new i(f.ZBAR_EAN2)),i.register("isbn_13+5",new i(f.ZBAR_ISBN13)).add(new i(f.ZBAR_EAN13)).add(new i(f.ZBAR_EAN5)),i.register("itf",new i(f.ZBAR_I25)),i.register("qr_code",new i(f.ZBAR_QRCODE)),i.register("sq_code",new i(f.ZBAR_SQCODE)),i.register("upc_a",new i(f.ZBAR_UPCA)).add(new i(f.ZBAR_EAN13)),i.register("upc_e",new i(f.ZBAR_UPCE)).add(new i(f.ZBAR_EAN13)),function(n){n[n.UNKNOWN=-1]="UNKNOWN",n[n.UPRIGHT=0]="UPRIGHT",n[n.ROTATED_RIGHT=1]="ROTATED_RIGHT",n[n.UPSIDE_DOWN=2]="UPSIDE_DOWN",n[n.ROTATED_LEFT=3]="ROTATED_LEFT"}(ge||(ge={}));class Pe{}const Fe=(()=>{try{return new OffscreenCanvas(1,1).getContext("2d")instanceof OffscreenCanvasRenderingContext2D}catch(n){return!1}})();class K{constructor(t={}){if(t.formats!==void 0){if(!Array.isArray(t.formats)||!t.formats.length)throw new TypeError(`Barcode formats should be a non-empty array of strings but are: ${JSON.stringify(t)}`);const r=t.formats.filter(a=>!i.formats().includes(a));if(r.length)throw new TypeError(`Unsupported barcode format(s): ${r.join(", ")}`)}this.formats=t.formats||i.formats(),this.zbarConfig=t.zbar||new Pe}static getSupportedFormats(){return Promise.resolve(i.formats())}detect(t){if(!K.isImageBitmapSource(t))throw new TypeError("BarcodeDetector.detect() argument is not an ImageBitmapSource");const r=K.intrinsicDimensions(t);if(r.width===0||r.height===0)return Promise.resolve([]);try{return Promise.all([this.toImageData(t),this.getScanner()]).then(a=>{const e=a[0],u=a[1];return this.zbarConfig.enableCache!==void 0&&u.enableCache(this.zbarConfig.enableCache),pe(e.data,e.width,e.height,u)}).then(a=>a.map(e=>this.toBarcodeDetectorResult(e)))}catch(a){return Promise.reject(a)}}getScanner(){return new Promise((t,r)=>De(this,void 0,void 0,function*(){if(!this.scanner){const a=yield me.create();this.formats.length>0&&(a.setConfig(f.ZBAR_NONE,J.ZBAR_CFG_ENABLE,0),this.formats.forEach(e=>i.configure(a,e))),this.scanner=a}t(this.scanner)}))}toImageData(t){const r=a=>{const e=K.intrinsicDimensions(a);this.canvas&&this.canvas.width===e.width&&this.canvas.height===e.height||(this.canvas=function(p,d){if(Fe)return new OffscreenCanvas(p,d);{const m=document.createElement("canvas");return m.width=p,m.height=d,m}}(e.width,e.height));const u=this.canvas,h=u.getContext("2d");return h.drawImage(a,0,0),h.getImageData(0,0,u.width,u.height)};if(t instanceof ImageData)return Promise.resolve(t);if(t instanceof Blob){const a=document.createElement("img");return a.src=URL.createObjectURL(t),a.decode().then(()=>r(a)).finally(()=>URL.revokeObjectURL(a.src))}return t instanceof CanvasRenderingContext2D?Promise.resolve(t.getImageData(0,0,t.canvas.width,t.canvas.height)):Promise.resolve(r(t))}toBarcodeDetectorResult(t){const r={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};return t.points.forEach(a=>{r.minX=Math.min(r.minX,a.x),r.maxX=Math.max(r.maxX,a.x),r.minY=Math.min(r.minY,a.y),r.maxY=Math.max(r.maxY,a.y)}),{format:i.toFormat(t.type),rawValue:t.decode(this.zbarConfig.encoding),orientation:t.orientation,quality:t.quality,boundingBox:DOMRectReadOnly.fromRect({x:r.minX,y:r.minY,width:r.maxX-r.minX,height:r.maxY-r.minY}),cornerPoints:[{x:r.minX,y:r.minY},{x:r.maxX,y:r.minY},{x:r.maxX,y:r.maxY},{x:r.minX,y:r.maxY}]}}static isImageBitmapSource(t){return t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof Blob||t instanceof ImageData||t instanceof CanvasRenderingContext2D||t instanceof ImageBitmap||t&&t.width==0||t&&t.height==0}static intrinsicDimensions(t){return{width:Number(t.naturalWidth||t.videoWidth||t.width),height:Number(t.naturalHeight||t.videoHeight||t.height)}}}const ot="@undecaf/zbar-wasm",ct="0.9.12",ut="https://cdn.jsdelivr.net/npm/@undecaf/zbar-wasm@0.9.12";var Ue=l(25359),L=l.n(Ue),xe=l(49811),z=l.n(xe),He=l(54306),W=l.n(He),w=l(50959),ft=function(t){var r=!1,a;return function(){return r||(a=t.apply(void 0,arguments),r=!0),a}},Le=function(){var n=z()(L()().mark(function t(r,a){var e,u,h,p,d=arguments;return L()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=d.length>2&&d[2]!==void 0?d[2]:"error",p=new Promise(function(R,A){u=R,h=A,r.addEventListener(a,u),r.addEventListener(e,h)}).finally(function(){r.removeEventListener(a,u),r.removeEventListener(e,h)}),c.next=4,p;case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},t)}));return function(r,a){return n.apply(this,arguments)}}(),Ge=function(){var n=z()(L()().mark(function t(r){return L()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(u){return setTimeout(u,r)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(r){return n.apply(this,arguments)}}(),re=[];function Me(n){setTimeout(function(){re.forEach(function(t){return t(n)})})}function ae(){var n=(0,w.useState)(),t=W()(n,2),r=t[0],a=t[1];return(0,w.useEffect)(function(){var e=re.push(a);return function(){re.splice(e,1)}},[]),[r,Me]}var je={width:{min:640,ideal:1280},height:{min:480,ideal:720},facingMode:{ideal:"environment"},advanced:[{width:1920,height:1280},{aspectRatio:1.333}]};function _e(n,t){var r=(0,w.useState)(!1),a=W()(r,2),e=a[0],u=a[1];if(!window.isSecureContext)throw new Error(`[react-barcode-scanner]: 
      Browser ask for secure origin (such as https) when use getUserMedia,
      reference: https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins
    `);var h=ae(),p=W()(h,2),d=p[1],m=(0,w.useMemo)(function(){var c=Object.assign({},je,t);return{audio:!1,video:c}},[t]);return(0,w.useEffect)(function(){var c,R=function(){var A=z()(L()().mark(function T(){var b;return L()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(b=n.current,b!=null){B.next=3;break}return B.abrupt("return");case 3:return B.next=5,navigator.mediaDevices.getUserMedia(m);case 5:return c=B.sent,b.mozSrcObject!==void 0?b.mozSrcObject=c:b.srcObject=c,B.next=9,Le(b,"loadeddata");case 9:return B.next=11,Ge(500);case 11:u(!0),d(c);case 13:case"end":return B.stop()}},T)}));return function(){return A.apply(this,arguments)}}();return R(),function(){var A;(A=c)===null||A===void 0||A.getTracks().forEach(function(T){return T.stop()})}},[n,m,d]),[e]}var We={delay:1e3,formats:["qr_code"]};function ve(n,t){var r=(0,w.useState)(),a=W()(r,2),e=a[0],u=a[1],h=(0,w.useState)(!1),p=W()(h,2),d=p[0],m=p[1],c=(0,w.useMemo)(function(){return Object.assign({},We,t)},[t]),R=(0,w.useCallback)(z()(L()().mark(function b(){var F,B,E,$,U;return L()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return F=n.current,B=new BarcodeDetector({formats:c.formats}),N.next=4,B.detect(F);case 4:E=N.sent,$=W()(E,1),U=$[0],U!==void 0&&u(U);case 8:case"end":return N.stop()}},b)})),[n,c.formats]);(0,w.useEffect)(function(){var b=n.current;if(!(b==null||!d)){var F=!1,B,E=function(){var $=z()(L()().mark(function U(){return L()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,R();case 2:F||(B=window.setTimeout(E,c.delay));case 3:case"end":return N.stop()}},U)}));return function(){return $.apply(this,arguments)}}();return B=window.setTimeout(E,c.delay),function(){clearTimeout(B),F=!0}}},[d,n,c.delay,R]);var A=(0,w.useCallback)(function(){m(!0)},[]),T=(0,w.useCallback)(function(){m(!1)},[]);return[e,A,T]}function Ye(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=(0,w.useState)(n),r=W()(t,2),a=r[0],e=r[1],u=(0,w.useState)(!1),h=W()(u,2),p=h[0],d=h[1],m=ae(),c=W()(m,1),R=c[0],A=(0,w.useMemo)(function(){return R==null?void 0:R.getVideoTracks()[0]},[R]);(0,w.useEffect)(function(){if(A!=null){var b=A.getCapabilities();b.torch!==void 0&&d(!0)}},[A]);var T=function(){var b=z()(L()().mark(function F(){return L()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(E.prev=0,p){E.next=3;break}throw new Error(`[react-barcode-scanner]: 
          device does not support torch capability
        `);case 3:return E.next=5,A.applyConstraints({advanced:[{torch:!a}]});case 5:e(!a),E.next=11;break;case 8:E.prev=8,E.t0=E.catch(0),console.warn(E.t0);case 11:case"end":return E.stop()}},F,null,[[0,8]])}));return function(){return b.apply(this,arguments)}}();return[p,a,T]}var ke=l(57213),Xe=l.n(ke),ze=l(12342),$e=l.n(ze),Ke=l(11527),Qe=["options","onCapture"],Ve=function(t){var r=t.options,a=t.onCapture,e=$e()(t,Qe),u=(0,w.useRef)(null),h=_e(u),p=W()(h,1),d=p[0],m=ve(u,r),c=W()(m,3),R=c[0],A=c[1],T=c[2];return(0,w.useEffect)(function(){d?A():T()},[T,d,A]),(0,w.useEffect)(function(){R!==void 0&&(a==null||a(R))},[R,a]),(0,Ke.jsx)("video",Xe()({ref:u,style:{width:"100%",height:"100%",objectFit:"cover"},autoPlay:!0,muted:!0,playsInline:!0},e))},Je=Ve;try{window.BarcodeDetector.getSupportedFormats()}catch(n){window.BarcodeDetector=K}},36635:function(C,k,l){"use strict";C.exports=l.p+"static/index.3a5ecbe9.js"},55996:function(C,k,l){"use strict";C.exports=l.p+"static/zbar.719ae018.wasm"},12342:function(C,k,l){var O=l(20006);function S(D,j){if(D==null)return{};var I=O(D,j),Z,H;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(D);for(H=0;H<f.length;H++)Z=f[H],!(j.indexOf(Z)>=0)&&Object.prototype.propertyIsEnumerable.call(D,Z)&&(I[Z]=D[Z])}return I}C.exports=S,C.exports.__esModule=!0,C.exports.default=C.exports},20006:function(C){function k(l,O){if(l==null)return{};var S={},D=Object.keys(l),j,I;for(I=0;I<D.length;I++)j=D[I],!(O.indexOf(j)>=0)&&(S[j]=l[j]);return S}C.exports=k,C.exports.__esModule=!0,C.exports.default=C.exports}}]);
}());