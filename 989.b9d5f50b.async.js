(self.webpackChunkreact_barcode_scanner=self.webpackChunkreact_barcode_scanner||[]).push([[989],{32989:function(b,P,u){"use strict";u.r(P),u.d(P,{BarcodeScanner:function(){return Y},useCamera:function(){return D},useScanning:function(){return R},useStreamState:function(){return A},useTorch:function(){return z}});var k=u(90228),o=u.n(k),T=u(87999),m=u.n(T),E=u(48305),c=u.n(E),t=u(50959),M=function(n){var a=!1,r;return function(){return a||(r=n.apply(void 0,arguments),a=!0),r}},W=function(){var i=m()(o()().mark(function n(a,r){var s,v,g,w,h=arguments;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>2&&h[2]!==void 0?h[2]:"error",w=new Promise(function(p,f){v=p,g=f,a.addEventListener(r,v),a.addEventListener(s,g)}).finally(function(){a.removeEventListener(r,v),a.removeEventListener(s,g)}),e.next=4,w;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},n)}));return function(a,r){return i.apply(this,arguments)}}(),I=function(){var i=m()(o()().mark(function n(a){return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,new Promise(function(v){return setTimeout(v,a)});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},n)}));return function(a){return i.apply(this,arguments)}}(),B=[];function U(i){setTimeout(function(){B.forEach(function(n){return n(i)})})}function A(){var i=(0,t.useState)(),n=c()(i,2),a=n[0],r=n[1];return(0,t.useEffect)(function(){var s=B.push(r);return function(){B.splice(s,1)}},[]),[a,U]}var F={width:{min:640,ideal:1280},height:{min:480,ideal:720},facingMode:{ideal:"environment"},advanced:[{width:1920,height:1280},{aspectRatio:1.333}]};function D(i,n){var a=(0,t.useState)(!1),r=c()(a,2),s=r[0],v=r[1];if(!window.isSecureContext)throw new Error(`[react-barcode-scanner]: 
      Browser ask for secure origin (such as https) when use getUserMedia,
      reference: https://sites.google.com/a/chromium.org/dev/Home/chromium-security/deprecating-powerful-features-on-insecure-origins
    `);var g=A(),w=c()(g,2),h=w[1],j=(0,t.useMemo)(function(){var e=Object.assign({},F,n);return{audio:!1,video:e}},[n]);return(0,t.useEffect)(function(){var e,p=function(){var f=m()(o()().mark(function y(){var S;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(S=i.current,S!=null){l.next=3;break}return l.abrupt("return");case 3:return l.next=5,navigator.mediaDevices.getUserMedia(j);case 5:return e=l.sent,S.mozSrcObject!==void 0?S.mozSrcObject=e:S.srcObject=e,l.next=9,W(S,"loadeddata");case 9:return l.next=11,I(500);case 11:v(!0),h(e);case 13:case"end":return l.stop()}},y)}));return function(){return f.apply(this,arguments)}}();return p(),function(){var f;(f=e)===null||f===void 0||f.getTracks().forEach(function(y){return y.stop()})}},[i,j,h]),[s]}var N={delay:1e3,formats:["qr_code"]};function R(i,n){var a=(0,t.useState)(),r=c()(a,2),s=r[0],v=r[1],g=(0,t.useState)(!1),w=c()(g,2),h=w[0],j=w[1],e=(0,t.useMemo)(function(){return Object.assign({},N,n)},[n]),p=(0,t.useCallback)(m()(o()().mark(function S(){var O,l,d,L,$;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return O=i.current,l=new BarcodeDetector({formats:e.formats}),C.next=4,l.detect(O);case 4:d=C.sent,L=c()(d,1),$=L[0],$!==void 0&&v($);case 8:case"end":return C.stop()}},S)})),[i,e.formats]);(0,t.useEffect)(function(){var S=i.current;if(!(S==null||!h)){var O=!1,l,d=function(){var L=m()(o()().mark(function $(){return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,p();case 2:O||(l=window.setTimeout(d,e.delay));case 3:case"end":return C.stop()}},$)}));return function(){return L.apply(this,arguments)}}();return l=window.setTimeout(d,e.delay),function(){clearTimeout(l),O=!0}}},[h,i,e.delay,p]);var f=(0,t.useCallback)(function(){j(!0)},[]),y=(0,t.useCallback)(function(){j(!1)},[]);return[s,f,y]}function z(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=(0,t.useState)(i),a=c()(n,2),r=a[0],s=a[1],v=(0,t.useState)(!1),g=c()(v,2),w=g[0],h=g[1],j=A(),e=c()(j,1),p=e[0],f=(0,t.useMemo)(function(){return p==null?void 0:p.getVideoTracks()[0]},[p]);(0,t.useEffect)(function(){if(f!=null){var S=f.getCapabilities();S.torch!==void 0&&h(!0)}},[f]);var y=function(){var S=m()(o()().mark(function O(){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,w){d.next=3;break}throw new Error(`[react-barcode-scanner]: 
          device does not support torch capability
        `);case 3:return d.next=5,f.applyConstraints({advanced:[{torch:!r}]});case 5:s(!r),d.next=11;break;case 8:d.prev=8,d.t0=d.catch(0),console.warn(d.t0);case 11:case"end":return d.stop()}},O,null,[[0,8]])}));return function(){return S.apply(this,arguments)}}();return[w,r,y]}var G=u(26068),H=u.n(G),V=u(67825),J=u.n(V),K=u(11527),Q=["options","onCapture"],X=function(n){var a=n.options,r=n.onCapture,s=J()(n,Q),v=(0,t.useRef)(null),g=D(v),w=c()(g,1),h=w[0],j=R(v,a),e=c()(j,3),p=e[0],f=e[1],y=e[2];return(0,t.useEffect)(function(){h?f():y()},[y,h,f]),(0,t.useEffect)(function(){p!==void 0&&(r==null||r(p))},[p,r]),(0,K.jsx)("video",H()({ref:v,style:{width:"100%",height:"100%",objectFit:"cover"},autoPlay:!0,muted:!0,playsInline:!0},s))},Y=X},67825:function(b,P,u){var k=u(64382);function o(T,m){if(T==null)return{};var E=k(T,m),c,t;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(T);for(t=0;t<M.length;t++)c=M[t],!(m.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(T,c)&&(E[c]=T[c])}return E}b.exports=o,b.exports.__esModule=!0,b.exports.default=b.exports},64382:function(b){function P(u,k){if(u==null)return{};var o={},T=Object.keys(u),m,E;for(E=0;E<T.length;E++)m=T[E],!(k.indexOf(m)>=0)&&(o[m]=u[m]);return o}b.exports=P,b.exports.__esModule=!0,b.exports.default=b.exports}}]);
