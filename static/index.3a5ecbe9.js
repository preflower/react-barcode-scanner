!(function(){var zbarWasm=function(d){"use strict";function I(r,t,n,o){return new(n||(n=Promise))(function(u,A){function y(g){try{e(o.next(g))}catch(m){A(m)}}function h(g){try{e(o.throw(g))}catch(m){A(m)}}function e(g){var m;g.done?u(g.value):(m=g.value,m instanceof n?m:new n(function(R){R(m)})).then(y,h)}e((o=o.apply(r,t||[])).next())})}function te(r){var t=r.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var u=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(n,o,u.get?u:{enumerable:!0,get:function(){return r[o]}})}),n}var ne={exports:{}};const Ce=te(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));function re(r,t){for(var n=0,o=r.length-1;o>=0;o--){var u=r[o];u==="."?r.splice(o,1):u===".."?(r.splice(o,1),n++):n&&(r.splice(o,1),n--)}if(t)for(;n--;n)r.unshift("..");return r}var Ne=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,L=function(r){return Ne.exec(r).slice(1)};function U(){for(var r="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:"/";if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");o&&(r=o+"/"+r,t=o.charAt(0)==="/")}return(t?"/":"")+(r=re(Y(r.split("/"),function(u){return!!u}),!t).join("/"))||"."}function k(r){var t=W(r),n=Te(r,-1)==="/";return(r=re(Y(r.split("/"),function(o){return!!o}),!t).join("/"))||t||(r="."),r&&n&&(r+="/"),(t?"/":"")+r}function W(r){return r.charAt(0)==="/"}function ie(){var r=Array.prototype.slice.call(arguments,0);return k(Y(r,function(t,n){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function oe(r,t){function n(g){for(var m=0;m<g.length&&g[m]==="";m++);for(var R=g.length-1;R>=0&&g[R]==="";R--);return m>R?[]:g.slice(m,R-m+1)}r=U(r).substr(1),t=U(t).substr(1);for(var o=n(r.split("/")),u=n(t.split("/")),A=Math.min(o.length,u.length),y=A,h=0;h<A;h++)if(o[h]!==u[h]){y=h;break}var e=[];for(h=y;h<o.length;h++)e.push("..");return(e=e.concat(u.slice(y))).join("/")}function ae(r){var t=L(r),n=t[0],o=t[1];return n||o?(o&&(o=o.substr(0,o.length-1)),n+o):"."}function se(r,t){var n=L(r)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function ue(r){return L(r)[3]}const Pe={extname:ue,basename:se,dirname:ae,sep:"/",delimiter:":",relative:oe,join:ie,isAbsolute:W,normalize:k,resolve:U};function Y(r,t){if(r.filter)return r.filter(t);for(var n=[],o=0;o<r.length;o++)t(r[o],o,r)&&n.push(r[o]);return n}var Te="ab".substr(-1)==="b"?function(r,t,n){return r.substr(t,n)}:function(r,t,n){return t<0&&(t=r.length+t),r.substr(t,n)};const Oe=te(Object.freeze(Object.defineProperty({__proto__:null,resolve:U,normalize:k,isAbsolute:W,join:ie,relative:oe,sep:"/",delimiter:":",dirname:ae,basename:se,extname:ue,default:Pe},Symbol.toStringTag,{value:"Module"})));(function(r,t){var n,o=(n=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0,typeof __filename!="undefined"&&(n=n||__filename),function(u){var A,y,h=u||{},e=h!==void 0?h:{};e.ready=new Promise(function(i,s){A=i,y=s});var g,m,R,C=Object.assign({},e),pe=typeof window=="object",O=typeof importScripts=="function",me=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b="";if(me){var de=Ce,K=Oe;b=O?K.dirname(b)+"/":__dirname+"/",g=(i,s)=>(i=x(i)?new URL(i):K.normalize(i),de.readFileSync(i,s?void 0:"utf8")),R=i=>{var s=g(i,!0);return s.buffer||(s=new Uint8Array(s)),s},m=(i,s,_)=>{i=x(i)?new URL(i):K.normalize(i),de.readFile(i,function(f,c){f?_(f):s(c.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(i){if(!(i instanceof Ge))throw i}),process.on("unhandledRejection",function(i){throw i}),e.inspect=function(){return"[Emscripten Module object]"}}else(pe||O)&&(O?b=self.location.href:typeof document!="undefined"&&document.currentScript&&(b=document.currentScript.src),n&&(b=n),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",g=i=>{var s=new XMLHttpRequest;return s.open("GET",i,!1),s.send(null),s.responseText},O&&(R=i=>{var s=new XMLHttpRequest;return s.open("GET",i,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),m=(i,s,_)=>{var f=new XMLHttpRequest;f.open("GET",i,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?s(f.response):_()},f.onerror=_,f.send(null)});var D,G,He=e.print||console.log.bind(console),P=e.printErr||console.warn.bind(console);Object.assign(e,C),C=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(D=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&$("no native wasm support detected");var Q,M,ye=!1,ge=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function Re(){var i=G.buffer;e.HEAP8=new Int8Array(i),e.HEAP16=new Int16Array(i),e.HEAP32=new Int32Array(i),e.HEAPU8=Q=new Uint8Array(i),e.HEAPU16=new Uint16Array(i),e.HEAPU32=M=new Uint32Array(i),e.HEAPF32=new Float32Array(i),e.HEAPF64=new Float64Array(i)}e.INITIAL_MEMORY;var B,V,Be=[],ve=[],Ee=[],N=0,F=null;function $(i){e.onAbort&&e.onAbort(i),P(i="Aborted("+i+")"),ye=!0,i+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(i);throw y(s),s}function Ze(i){return i.startsWith("data:application/octet-stream;base64,")}function x(i){return i.startsWith("file://")}function be(i){try{if(i==B&&D)return new Uint8Array(D);if(R)return R(i);throw"both async and sync fetching of the wasm failed"}catch(s){$(s)}}function Ge(i){this.name="ExitStatus",this.message="Program terminated with exit("+i+")",this.status=i}function J(i){for(;i.length>0;)i.shift()(e)}function Me(i){var s=G.buffer;try{return G.grow(i-s.byteLength+65535>>>16),Re(),1}catch(_){}}Ze(B="zbar.wasm")||(V=B,B=e.locateFile?e.locateFile(V,b):b+V);var xe=[null,[],[]];function je(i,s){var _=xe[i];s===0||s===10?((i===1?He:P)(function(f,c,p){for(var E=c+p,v=c;f[v]&&!(v>=E);)++v;if(v-c>16&&f.buffer&&ge)return ge.decode(f.subarray(c,v));for(var w="";c<v;){var Z=f[c++];if(128&Z){var ee=63&f[c++];if((224&Z)!=192){var Se=63&f[c++];if((Z=(240&Z)==224?(15&Z)<<12|ee<<6|Se:(7&Z)<<18|ee<<12|Se<<6|63&f[c++])<65536)w+=String.fromCharCode(Z);else{var we=Z-65536;w+=String.fromCharCode(55296|we>>10,56320|1023&we)}}else w+=String.fromCharCode((31&Z)<<6|ee)}else w+=String.fromCharCode(Z)}return w}(_,0)),_.length=0):_.push(s)}var j,Le={d:function(){return!0},e:function(){return Date.now()},c:function(i){var s,_,f=Q.length,c=2147483648;if((i>>>=0)>c)return!1;for(var p=1;p<=4;p*=2){var E=f*(1+.2/p);if(E=Math.min(E,i+100663296),Me(Math.min(c,(s=Math.max(i,E))+((_=65536)-s%_)%_)))return!0}return!1},f:function(i){return 52},b:function(i,s,_,f,c){return 70},a:function(i,s,_,f){for(var c=0,p=0;p<_;p++){var E=M[s>>2],v=M[s+4>>2];s+=8;for(var w=0;w<v;w++)je(i,Q[E+w]);c+=v}return M[f>>2]=c,0}};function Ie(i){function s(){j||(j=!0,e.calledRun=!0,ye||(J(ve),A(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)_=e.postRun.shift(),Ee.unshift(_);var _;J(Ee)}()))}N>0||(function(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)_=e.preRun.shift(),Be.unshift(_);var _;J(Be)}(),N>0||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),s()},1)):s()))}if(function(){var i={a:Le};function s(c,p){var E,v=c.exports;e.asm=v,G=e.asm.g,Re(),e.asm.s,E=e.asm.h,ve.unshift(E),function(w){if(N--,e.monitorRunDependencies&&e.monitorRunDependencies(N),N==0&&F){var Z=F;F=null,Z()}}()}function _(c){s(c.instance)}function f(c){return function(){if(!D&&(pe||O)){if(typeof fetch=="function"&&!x(B))return fetch(B,{credentials:"same-origin"}).then(function(p){if(!p.ok)throw"failed to load wasm binary file at '"+B+"'";return p.arrayBuffer()}).catch(function(){return be(B)});if(m)return new Promise(function(p,E){m(B,function(v){p(new Uint8Array(v))},E)})}return Promise.resolve().then(function(){return be(B)})}().then(function(p){return WebAssembly.instantiate(p,i)}).then(function(p){return p}).then(c,function(p){P("failed to asynchronously prepare wasm: "+p),$(p)})}if(N++,e.monitorRunDependencies&&e.monitorRunDependencies(N),e.instantiateWasm)try{return e.instantiateWasm(i,s)}catch(c){P("Module.instantiateWasm callback failed with error: "+c),y(c)}(D||typeof WebAssembly.instantiateStreaming!="function"||Ze(B)||x(B)||me||typeof fetch!="function"?f(_):fetch(B,{credentials:"same-origin"}).then(function(c){return WebAssembly.instantiateStreaming(c,i).then(_,function(p){return P("wasm streaming compile failed: "+p),P("falling back to ArrayBuffer instantiation"),f(_)})})).catch(y)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.h).apply(null,arguments)},e._ImageScanner_create=function(){return(e._ImageScanner_create=e.asm.i).apply(null,arguments)},e._ImageScanner_destory=function(){return(e._ImageScanner_destory=e.asm.j).apply(null,arguments)},e._ImageScanner_set_config=function(){return(e._ImageScanner_set_config=e.asm.k).apply(null,arguments)},e._ImageScanner_enable_cache=function(){return(e._ImageScanner_enable_cache=e.asm.l).apply(null,arguments)},e._ImageScanner_recycle_image=function(){return(e._ImageScanner_recycle_image=e.asm.m).apply(null,arguments)},e._ImageScanner_get_results=function(){return(e._ImageScanner_get_results=e.asm.n).apply(null,arguments)},e._ImageScanner_scan=function(){return(e._ImageScanner_scan=e.asm.o).apply(null,arguments)},e._Image_create=function(){return(e._Image_create=e.asm.p).apply(null,arguments)},e._Image_destory=function(){return(e._Image_destory=e.asm.q).apply(null,arguments)},e._Image_get_symbols=function(){return(e._Image_get_symbols=e.asm.r).apply(null,arguments)},e._free=function(){return(e._free=e.asm.t).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.u).apply(null,arguments)},F=function i(){j||Ie(),j||(F=i)},e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Ie(),h.ready});r.exports=o})(ne);const De=ne.exports;let z;const Fe=I(void 0,void 0,void 0,function*(){if(z=yield De(),!z)throw Error("WASM was not loaded");return z}),H=()=>I(void 0,void 0,void 0,function*(){return yield Fe});var a,l,S;d.ZBarSymbolType=void 0,(a=d.ZBarSymbolType||(d.ZBarSymbolType={}))[a.ZBAR_NONE=0]="ZBAR_NONE",a[a.ZBAR_PARTIAL=1]="ZBAR_PARTIAL",a[a.ZBAR_EAN2=2]="ZBAR_EAN2",a[a.ZBAR_EAN5=5]="ZBAR_EAN5",a[a.ZBAR_EAN8=8]="ZBAR_EAN8",a[a.ZBAR_UPCE=9]="ZBAR_UPCE",a[a.ZBAR_ISBN10=10]="ZBAR_ISBN10",a[a.ZBAR_UPCA=12]="ZBAR_UPCA",a[a.ZBAR_EAN13=13]="ZBAR_EAN13",a[a.ZBAR_ISBN13=14]="ZBAR_ISBN13",a[a.ZBAR_COMPOSITE=15]="ZBAR_COMPOSITE",a[a.ZBAR_I25=25]="ZBAR_I25",a[a.ZBAR_DATABAR=34]="ZBAR_DATABAR",a[a.ZBAR_DATABAR_EXP=35]="ZBAR_DATABAR_EXP",a[a.ZBAR_CODABAR=38]="ZBAR_CODABAR",a[a.ZBAR_CODE39=39]="ZBAR_CODE39",a[a.ZBAR_PDF417=57]="ZBAR_PDF417",a[a.ZBAR_QRCODE=64]="ZBAR_QRCODE",a[a.ZBAR_SQCODE=80]="ZBAR_SQCODE",a[a.ZBAR_CODE93=93]="ZBAR_CODE93",a[a.ZBAR_CODE128=128]="ZBAR_CODE128",a[a.ZBAR_SYMBOL=255]="ZBAR_SYMBOL",a[a.ZBAR_ADDON2=512]="ZBAR_ADDON2",a[a.ZBAR_ADDON5=1280]="ZBAR_ADDON5",a[a.ZBAR_ADDON=1792]="ZBAR_ADDON",d.ZBarConfigType=void 0,(l=d.ZBarConfigType||(d.ZBarConfigType={}))[l.ZBAR_CFG_ENABLE=0]="ZBAR_CFG_ENABLE",l[l.ZBAR_CFG_ADD_CHECK=1]="ZBAR_CFG_ADD_CHECK",l[l.ZBAR_CFG_EMIT_CHECK=2]="ZBAR_CFG_EMIT_CHECK",l[l.ZBAR_CFG_ASCII=3]="ZBAR_CFG_ASCII",l[l.ZBAR_CFG_BINARY=4]="ZBAR_CFG_BINARY",l[l.ZBAR_CFG_NUM=5]="ZBAR_CFG_NUM",l[l.ZBAR_CFG_MIN_LEN=32]="ZBAR_CFG_MIN_LEN",l[l.ZBAR_CFG_MAX_LEN=33]="ZBAR_CFG_MAX_LEN",l[l.ZBAR_CFG_UNCERTAINTY=64]="ZBAR_CFG_UNCERTAINTY",l[l.ZBAR_CFG_POSITION=128]="ZBAR_CFG_POSITION",l[l.ZBAR_CFG_TEST_INVERTED=129]="ZBAR_CFG_TEST_INVERTED",l[l.ZBAR_CFG_X_DENSITY=256]="ZBAR_CFG_X_DENSITY",l[l.ZBAR_CFG_Y_DENSITY=257]="ZBAR_CFG_Y_DENSITY",d.ZBarOrientation=void 0,(S=d.ZBarOrientation||(d.ZBarOrientation={}))[S.ZBAR_ORIENT_UNKNOWN=-1]="ZBAR_ORIENT_UNKNOWN",S[S.ZBAR_ORIENT_UP=0]="ZBAR_ORIENT_UP",S[S.ZBAR_ORIENT_RIGHT=1]="ZBAR_ORIENT_RIGHT",S[S.ZBAR_ORIENT_DOWN=2]="ZBAR_ORIENT_DOWN",S[S.ZBAR_ORIENT_LEFT=3]="ZBAR_ORIENT_LEFT";class ce{constructor(t,n){this.ptr=t,this.inst=n}checkAlive(){if(!this.ptr)throw Error("Call after destroyed")}getPointer(){return this.checkAlive(),this.ptr}}class fe{constructor(t,n){this.ptr=t,this.ptr32=t>>2,this.buf=n,this.HEAP8=new Int8Array(n),this.HEAPU32=new Uint32Array(n),this.HEAP32=new Int32Array(n)}}class q extends fe{get type(){return this.HEAPU32[this.ptr32]}get data(){const t=this.HEAPU32[this.ptr32+4],n=this.HEAPU32[this.ptr32+5];return Int8Array.from(this.HEAP8.subarray(n,n+t))}get points(){const t=this.HEAPU32[this.ptr32+7],n=this.HEAPU32[this.ptr32+8]>>2,o=[];for(let u=0;u<t;++u){const A=this.HEAP32[n+2*u],y=this.HEAP32[n+2*u+1];o.push({x:A,y})}return o}get orientation(){return this.HEAP32[this.ptr32+9]}get next(){const t=this.HEAPU32[this.ptr32+11];return t?new q(t,this.buf):null}get time(){return this.HEAPU32[this.ptr32+13]}get cacheCount(){return this.HEAP32[this.ptr32+14]}get quality(){return this.HEAP32[this.ptr32+15]}}class Ue extends fe{get head(){const t=this.HEAPU32[this.ptr32+2];return t?new q(t,this.buf):null}}class T{constructor(t){this.type=t.type,this.typeName=d.ZBarSymbolType[this.type],this.data=t.data,this.points=t.points,this.orientation=t.orientation,this.time=t.time,this.cacheCount=t.cacheCount,this.quality=t.quality}static createSymbolsFromPtr(t,n){if(t==0)return[];let o=new Ue(t,n).head;const u=[];for(;o!==null;)u.push(new T(o)),o=o.next;return u}decode(t){return new TextDecoder(t).decode(this.data)}}class X extends ce{static createFromGrayBuffer(t,n,o,u=0){return I(this,void 0,void 0,function*(){const A=yield H(),y=new Uint8Array(o),h=t*n;if(h!==y.byteLength)throw Error("dataBuf does not match width and height");const e=A._malloc(h);return A.HEAPU8.set(y,e),new this(A._Image_create(t,n,808466521,e,h,u),A)})}static createFromRGBABuffer(t,n,o,u=0){return I(this,void 0,void 0,function*(){const A=yield H(),y=new Uint8Array(o),h=t*n;if(4*h!==y.byteLength)throw Error("dataBuf does not match width and height");const e=A._malloc(h),g=e+h,m=A.HEAPU8;for(let R=e,C=0;R<g;R++,C+=4)m[R]=19595*y[C]+38469*y[C+1]+7472*y[C+2]>>16;return new this(A._Image_create(t,n,808466521,e,h,u),A)})}destroy(){this.checkAlive(),this.inst._Image_destory(this.ptr),this.ptr=0}getSymbols(){this.checkAlive();const t=this.inst._Image_get_symbols(this.ptr);return T.createSymbolsFromPtr(t,this.inst.HEAPU8.buffer)}}class le extends ce{static create(){return I(this,void 0,void 0,function*(){const t=yield H();return new this(t._ImageScanner_create(),t)})}destroy(){this.checkAlive(),this.inst._ImageScanner_destory(this.ptr),this.ptr=0}setConfig(t,n,o){return this.checkAlive(),this.inst._ImageScanner_set_config(this.ptr,t,n,o)}enableCache(t=!0){this.checkAlive(),this.inst._ImageScanner_enable_cache(this.ptr,t)}recycleImage(t){this.checkAlive(),this.inst._ImageScanner_recycle_image(this.ptr,t.getPointer())}getResults(){this.checkAlive();const t=this.inst._ImageScanner_get_results(this.ptr);return T.createSymbolsFromPtr(t,this.inst.HEAPU8.buffer)}scan(t){return this.checkAlive(),this.inst._ImageScanner_scan(this.ptr,t.getPointer())}}const _e=le.create(),Ae=(r,t)=>I(void 0,void 0,void 0,function*(){t===void 0&&(t=yield _e);const n=t.scan(r);if(n<0)throw Error("Scan Failed");return n===0?[]:r.getSymbols()}),he=(r,t,n,o)=>I(void 0,void 0,void 0,function*(){const u=yield X.createFromRGBABuffer(t,n,r),A=yield Ae(u,o);return u.destroy(),A});return d.ZBarImage=X,d.ZBarScanner=le,d.ZBarSymbol=T,d.getDefaultScanner=()=>I(void 0,void 0,void 0,function*(){return yield _e}),d.getInstance=H,d.scanGrayBuffer=(r,t,n,o)=>I(void 0,void 0,void 0,function*(){const u=yield X.createFromGrayBuffer(t,n,r),A=yield Ae(u,o);return u.destroy(),A}),d.scanImageData=(r,t)=>I(void 0,void 0,void 0,function*(){return yield he(r.data.buffer,r.width,r.height,t)}),d.scanRGBABuffer=he,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),d}({});
}());