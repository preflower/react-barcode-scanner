!(function(){var zbarWasm=function(h){"use strict";function S(n,e,i,s){return new(i||(i=Promise))(function(u,A){function d(m){try{y(s.next(m))}catch(p){A(p)}}function t(m){try{y(s.throw(m))}catch(p){A(p)}}function y(m){var p;m.done?u(m.value):(p=m.value,p instanceof i?p:new i(function(v){v(p)})).then(d,t)}y((s=s.apply(n,e||[])).next())})}function Tt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function rt(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var i=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var u=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(i,s,u.get?u:{enumerable:!0,get:function(){return n[s]}})}),i}typeof SuppressedError=="function"&&SuppressedError;var nt={exports:{}};const Pt=rt(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));function it(n,e){for(var i=0,s=n.length-1;s>=0;s--){var u=n[s];u==="."?n.splice(s,1):u===".."?(n.splice(s,1),i++):i&&(n.splice(s,1),i--)}if(e)for(;i--;i)n.unshift("..");return n}var Ot=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Y=function(n){return Ot.exec(n).slice(1)};function G(){for(var n="",e=!1,i=arguments.length-1;i>=-1&&!e;i--){var s=i>=0?arguments[i]:"/";if(typeof s!="string")throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,e=s.charAt(0)==="/")}return(e?"/":"")+(n=it(X(n.split("/"),function(u){return!!u}),!e).join("/"))||"."}function z(n){var e=q(n),i=Ft(n,-1)==="/";return(n=it(X(n.split("/"),function(s){return!!s}),!e).join("/"))||e||(n="."),n&&i&&(n+="/"),(e?"/":"")+n}function q(n){return n.charAt(0)==="/"}function ot(){return z(X(Array.prototype.slice.call(arguments,0),function(n,e){if(typeof n!="string")throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))}function st(n,e){function i(m){for(var p=0;p<m.length&&m[p]==="";p++);for(var v=m.length-1;v>=0&&m[v]==="";v--);return p>v?[]:m.slice(p,v-p+1)}n=G(n).substr(1),e=G(e).substr(1);for(var s=i(n.split("/")),u=i(e.split("/")),A=Math.min(s.length,u.length),d=A,t=0;t<A;t++)if(s[t]!==u[t]){d=t;break}var y=[];for(t=d;t<s.length;t++)y.push("..");return(y=y.concat(u.slice(d))).join("/")}function at(n){var e=Y(n),i=e[0],s=e[1];return i||s?(s&&(s=s.substr(0,s.length-1)),i+s):"."}function ct(n,e){var i=Y(n)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i}function ut(n){return Y(n)[3]}const Dt={extname:ut,basename:ct,dirname:at,sep:"/",delimiter:":",relative:st,join:ot,isAbsolute:q,normalize:z,resolve:G};function X(n,e){if(n.filter)return n.filter(e);for(var i=[],s=0;s<n.length;s++)e(n[s],s,n)&&i.push(n[s]);return i}var Ft="ab".substr(-1)==="b"?function(n,e,i){return n.substr(e,i)}:function(n,e,i){return e<0&&(e=n.length+e),n.substr(e,i)};const Ut=rt(Object.freeze(Object.defineProperty({__proto__:null,basename:ct,default:Dt,delimiter:":",dirname:at,extname:ut,isAbsolute:q,join:ot,normalize:z,relative:st,resolve:G,sep:"/"},Symbol.toStringTag,{value:"Module"})));(function(n,e){var i,s=(i=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0,typeof __filename!="undefined"&&(i=i||__filename),function(u={}){var A,d,t=u;t.ready=new Promise((r,o)=>{A=r,d=o});var y,m,p,v=Object.assign({},t),w=typeof window=="object",O=typeof importScripts=="function",mt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I="";if(mt){var yt=Pt,V=Ut;I=O?V.dirname(I)+"/":__dirname+"/",y=(r,o)=>(r=x(r)?new URL(r):V.normalize(r),yt.readFileSync(r,o?void 0:"utf8")),p=r=>{var o=y(r,!0);return o.buffer||(o=new Uint8Array(o)),o},m=(r,o,l,c=!0)=>{r=x(r)?new URL(r):V.normalize(r),yt.readFile(r,c?void 0:"utf8",(f,R)=>{f?l(f):o(c?R.buffer:R)})},!t.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),t.inspect=()=>"[Emscripten Module object]"}else(w||O)&&(O?I=self.location.href:typeof document!="undefined"&&document.currentScript&&(I=document.currentScript.src),i&&(I=i),I=I.indexOf("blob:")!==0?I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):"",y=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},O&&(p=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),m=(r,o,l)=>{var c=new XMLHttpRequest;c.open("GET",r,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?o(c.response):l()},c.onerror=l,c.send(null)});var D,M,B,jt=t.print||console.log.bind(console),T=t.printErr||console.error.bind(console);Object.assign(t,v),v=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(D=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&bt("no native wasm support detected");var J,j,Rt=!1;function gt(){var r=M.buffer;t.HEAP8=new Int8Array(r),t.HEAP16=new Int16Array(r),t.HEAP32=new Int32Array(r),t.HEAPU8=J=new Uint8Array(r),t.HEAPU16=new Uint16Array(r),t.HEAPU32=j=new Uint32Array(r),t.HEAPF32=new Float32Array(r),t.HEAPF64=new Float64Array(r)}var Bt=[],vt=[],Et=[],N=0,F=null;function bt(r){t.onAbort&&t.onAbort(r),T(r="Aborted("+r+")"),Rt=!0,r+=". Build with -sASSERTIONS for more info.";var o=new WebAssembly.RuntimeError(r);throw d(o),o}var U,tt,xt="data:application/octet-stream;base64,";function Zt(r){return r.startsWith(xt)}function x(r){return r.startsWith("file://")}function It(r){if(r==U&&D)return new Uint8Array(D);if(p)return p(r);throw"both async and sync fetching of the wasm failed"}function St(r,o,l){return function(c){if(!D&&(w||O)){if(typeof fetch=="function"&&!x(c))return fetch(c,{credentials:"same-origin"}).then(f=>{if(!f.ok)throw"failed to load wasm binary file at '"+c+"'";return f.arrayBuffer()}).catch(()=>It(c));if(m)return new Promise((f,R)=>{m(c,g=>f(new Uint8Array(g)),R)})}return Promise.resolve().then(()=>It(c))}(r).then(c=>WebAssembly.instantiate(c,o)).then(c=>c).then(l,c=>{T("failed to asynchronously prepare wasm: "+c),bt(c)})}Zt(U="zbar.wasm")||(tt=U,U=t.locateFile?t.locateFile(tt,I):I+tt);var L,et=r=>{for(;r.length>0;)r.shift()(t)},Lt=r=>{var o=r-M.buffer.byteLength+65535>>>16;try{return M.grow(o),gt(),1}catch(l){}},Ct=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0,kt=[null,[],[]],Wt=(r,o)=>{var l=kt[r];o===0||o===10?((r===1?jt:T)(((c,f,R)=>{for(var g=f+R,E=f;c[E]&&!(E>=g);)++E;if(E-f>16&&c.buffer&&Ct)return Ct.decode(c.subarray(f,E));for(var Z="";f<E;){var b=c[f++];if(128&b){var k=63&c[f++];if((224&b)!=192){var W=63&c[f++];if((b=(240&b)==224?(15&b)<<12|k<<6|W:(7&b)<<18|k<<12|W<<6|63&c[f++])<65536)Z+=String.fromCharCode(b);else{var Nt=b-65536;Z+=String.fromCharCode(55296|Nt>>10,56320|1023&Nt)}}else Z+=String.fromCharCode((31&b)<<6|k)}else Z+=String.fromCharCode(b)}return Z})(l,0)),l.length=0):l.push(o)},Yt={d:()=>!0,e:function(){return Date.now()},c:r=>{var o=J.length,l=2147483648;if((r>>>=0)>l)return!1;for(var c,f,R=1;R<=4;R*=2){var g=o*(1+.2/R);g=Math.min(g,r+100663296);var E=Math.min(l,(c=Math.max(r,g))+((f=65536)-c%f)%f);if(Lt(E))return!0}return!1},f:r=>52,b:function(r,o,l,c,f){return 70},a:(r,o,l,c)=>{for(var f=0,R=0;R<l;R++){var g=j[o>>2],E=j[o+4>>2];o+=8;for(var Z=0;Z<E;Z++)Wt(r,J[g+Z]);f+=E}return j[c>>2]=f,0}};function wt(){function r(){L||(L=!0,t.calledRun=!0,Rt||(et(vt),A(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)o=t.postRun.shift(),Et.unshift(o);var o;et(Et)}()))}N>0||(function(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)o=t.preRun.shift(),Bt.unshift(o);var o;et(Bt)}(),N>0||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),r()},1)):r()))}if(function(){var r,o,l,c,f={a:Yt};function R(g,E){var Z,b=g.exports;return M=(B=b).g,gt(),B.s,Z=B.h,vt.unshift(Z),function(k){if(N--,t.monitorRunDependencies&&t.monitorRunDependencies(N),N==0&&F){var W=F;F=null,W()}}(),b}if(N++,t.monitorRunDependencies&&t.monitorRunDependencies(N),t.instantiateWasm)try{return t.instantiateWasm(f,R)}catch(g){T("Module.instantiateWasm callback failed with error: "+g),d(g)}(r=D,o=U,l=f,c=function(g){R(g.instance)},r||typeof WebAssembly.instantiateStreaming!="function"||Zt(o)||x(o)||mt||typeof fetch!="function"?St(o,l,c):fetch(o,{credentials:"same-origin"}).then(g=>WebAssembly.instantiateStreaming(g,l).then(c,function(E){return T("wasm streaming compile failed: "+E),T("falling back to ArrayBuffer instantiation"),St(o,l,c)}))).catch(d)}(),t._ImageScanner_create=()=>(t._ImageScanner_create=B.i)(),t._ImageScanner_destory=r=>(t._ImageScanner_destory=B.j)(r),t._ImageScanner_set_config=(r,o,l,c)=>(t._ImageScanner_set_config=B.k)(r,o,l,c),t._ImageScanner_enable_cache=(r,o)=>(t._ImageScanner_enable_cache=B.l)(r,o),t._ImageScanner_recycle_image=(r,o)=>(t._ImageScanner_recycle_image=B.m)(r,o),t._ImageScanner_get_results=r=>(t._ImageScanner_get_results=B.n)(r),t._ImageScanner_scan=(r,o)=>(t._ImageScanner_scan=B.o)(r,o),t._Image_create=(r,o,l,c,f,R)=>(t._Image_create=B.p)(r,o,l,c,f,R),t._Image_destory=r=>(t._Image_destory=B.q)(r),t._Image_get_symbols=r=>(t._Image_get_symbols=B.r)(r),t._free=r=>(t._free=B.t)(r),t._malloc=r=>(t._malloc=B.u)(r),F=function r(){L||wt(),L||(F=r)},t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return wt(),u.ready});n.exports=s})(nt);const Gt=Tt(nt.exports);let K;const Ht=S(void 0,void 0,void 0,function*(){if(K=yield Gt(),!K)throw Error("WASM was not loaded");return K}),H=()=>S(void 0,void 0,void 0,function*(){return yield Ht});var a,_,C;h.ZBarSymbolType=void 0,(a=h.ZBarSymbolType||(h.ZBarSymbolType={}))[a.ZBAR_NONE=0]="ZBAR_NONE",a[a.ZBAR_PARTIAL=1]="ZBAR_PARTIAL",a[a.ZBAR_EAN2=2]="ZBAR_EAN2",a[a.ZBAR_EAN5=5]="ZBAR_EAN5",a[a.ZBAR_EAN8=8]="ZBAR_EAN8",a[a.ZBAR_UPCE=9]="ZBAR_UPCE",a[a.ZBAR_ISBN10=10]="ZBAR_ISBN10",a[a.ZBAR_UPCA=12]="ZBAR_UPCA",a[a.ZBAR_EAN13=13]="ZBAR_EAN13",a[a.ZBAR_ISBN13=14]="ZBAR_ISBN13",a[a.ZBAR_COMPOSITE=15]="ZBAR_COMPOSITE",a[a.ZBAR_I25=25]="ZBAR_I25",a[a.ZBAR_DATABAR=34]="ZBAR_DATABAR",a[a.ZBAR_DATABAR_EXP=35]="ZBAR_DATABAR_EXP",a[a.ZBAR_CODABAR=38]="ZBAR_CODABAR",a[a.ZBAR_CODE39=39]="ZBAR_CODE39",a[a.ZBAR_PDF417=57]="ZBAR_PDF417",a[a.ZBAR_QRCODE=64]="ZBAR_QRCODE",a[a.ZBAR_SQCODE=80]="ZBAR_SQCODE",a[a.ZBAR_CODE93=93]="ZBAR_CODE93",a[a.ZBAR_CODE128=128]="ZBAR_CODE128",a[a.ZBAR_SYMBOL=255]="ZBAR_SYMBOL",a[a.ZBAR_ADDON2=512]="ZBAR_ADDON2",a[a.ZBAR_ADDON5=1280]="ZBAR_ADDON5",a[a.ZBAR_ADDON=1792]="ZBAR_ADDON",h.ZBarConfigType=void 0,(_=h.ZBarConfigType||(h.ZBarConfigType={}))[_.ZBAR_CFG_ENABLE=0]="ZBAR_CFG_ENABLE",_[_.ZBAR_CFG_ADD_CHECK=1]="ZBAR_CFG_ADD_CHECK",_[_.ZBAR_CFG_EMIT_CHECK=2]="ZBAR_CFG_EMIT_CHECK",_[_.ZBAR_CFG_ASCII=3]="ZBAR_CFG_ASCII",_[_.ZBAR_CFG_BINARY=4]="ZBAR_CFG_BINARY",_[_.ZBAR_CFG_NUM=5]="ZBAR_CFG_NUM",_[_.ZBAR_CFG_MIN_LEN=32]="ZBAR_CFG_MIN_LEN",_[_.ZBAR_CFG_MAX_LEN=33]="ZBAR_CFG_MAX_LEN",_[_.ZBAR_CFG_UNCERTAINTY=64]="ZBAR_CFG_UNCERTAINTY",_[_.ZBAR_CFG_POSITION=128]="ZBAR_CFG_POSITION",_[_.ZBAR_CFG_TEST_INVERTED=129]="ZBAR_CFG_TEST_INVERTED",_[_.ZBAR_CFG_X_DENSITY=256]="ZBAR_CFG_X_DENSITY",_[_.ZBAR_CFG_Y_DENSITY=257]="ZBAR_CFG_Y_DENSITY",h.ZBarOrientation=void 0,(C=h.ZBarOrientation||(h.ZBarOrientation={}))[C.ZBAR_ORIENT_UNKNOWN=-1]="ZBAR_ORIENT_UNKNOWN",C[C.ZBAR_ORIENT_UP=0]="ZBAR_ORIENT_UP",C[C.ZBAR_ORIENT_RIGHT=1]="ZBAR_ORIENT_RIGHT",C[C.ZBAR_ORIENT_DOWN=2]="ZBAR_ORIENT_DOWN",C[C.ZBAR_ORIENT_LEFT=3]="ZBAR_ORIENT_LEFT";class ft{constructor(e,i){this.ptr=e,this.inst=i}checkAlive(){if(!this.ptr)throw Error("Call after destroyed")}getPointer(){return this.checkAlive(),this.ptr}}class _t{constructor(e,i){this.ptr=e,this.ptr32=e>>2,this.buf=i,this.HEAP8=new Int8Array(i),this.HEAPU32=new Uint32Array(i),this.HEAP32=new Int32Array(i)}}class $ extends _t{get type(){return this.HEAPU32[this.ptr32]}get data(){const e=this.HEAPU32[this.ptr32+4],i=this.HEAPU32[this.ptr32+5];return Int8Array.from(this.HEAP8.subarray(i,i+e))}get points(){const e=this.HEAPU32[this.ptr32+7],i=this.HEAPU32[this.ptr32+8]>>2,s=[];for(let u=0;u<e;++u){const A=this.HEAP32[i+2*u],d=this.HEAP32[i+2*u+1];s.push({x:A,y:d})}return s}get orientation(){return this.HEAP32[this.ptr32+9]}get next(){const e=this.HEAPU32[this.ptr32+11];return e?new $(e,this.buf):null}get time(){return this.HEAPU32[this.ptr32+13]}get cacheCount(){return this.HEAP32[this.ptr32+14]}get quality(){return this.HEAP32[this.ptr32+15]}}class Mt extends _t{get head(){const e=this.HEAPU32[this.ptr32+2];return e?new $(e,this.buf):null}}class P{constructor(e){this.type=e.type,this.typeName=h.ZBarSymbolType[this.type],this.data=e.data,this.points=e.points,this.orientation=e.orientation,this.time=e.time,this.cacheCount=e.cacheCount,this.quality=e.quality}static createSymbolsFromPtr(e,i){if(e==0)return[];let s=new Mt(e,i).head;const u=[];for(;s!==null;)u.push(new P(s)),s=s.next;return u}decode(e){return new TextDecoder(e).decode(this.data)}}class Q extends ft{static createFromGrayBuffer(e,i,s,u=0){return S(this,void 0,void 0,function*(){const A=yield H(),d=new Uint8Array(s),t=e*i;if(t!==d.byteLength)throw Error(`data length (${d.byteLength} bytes) does not match width and height (${t} bytes)`);const y=A._malloc(t);return A.HEAPU8.set(d,y),new this(A._Image_create(e,i,808466521,y,t,u),A)})}static createFromRGBABuffer(e,i,s,u=0){return S(this,void 0,void 0,function*(){const A=yield H(),d=new Uint8Array(s),t=e*i;if(4*t!==d.byteLength)throw Error(`data length (${d.byteLength} bytes) does not match width and height (${4*t} bytes)`);const y=A._malloc(t),m=y+t,p=A.HEAPU8;for(let v=y,w=0;v<m;v++,w+=4)p[v]=19595*d[w]+38469*d[w+1]+7472*d[w+2]>>16;return new this(A._Image_create(e,i,808466521,y,t,u),A)})}destroy(){this.checkAlive(),this.inst._Image_destory(this.ptr),this.ptr=0}getSymbols(){this.checkAlive();const e=this.inst._Image_get_symbols(this.ptr);return P.createSymbolsFromPtr(e,this.inst.HEAPU8.buffer)}}class lt extends ft{static create(){return S(this,void 0,void 0,function*(){const e=yield H();return new this(e._ImageScanner_create(),e)})}destroy(){this.checkAlive(),this.inst._ImageScanner_destory(this.ptr),this.ptr=0}setConfig(e,i,s){return this.checkAlive(),this.inst._ImageScanner_set_config(this.ptr,e,i,s)}enableCache(e=!0){this.checkAlive(),this.inst._ImageScanner_enable_cache(this.ptr,e)}recycleImage(e){this.checkAlive(),this.inst._ImageScanner_recycle_image(this.ptr,e.getPointer())}getResults(){this.checkAlive();const e=this.inst._ImageScanner_get_results(this.ptr);return P.createSymbolsFromPtr(e,this.inst.HEAPU8.buffer)}scan(e){return this.checkAlive(),this.inst._ImageScanner_scan(this.ptr,e.getPointer())}}const At=()=>S(void 0,void 0,void 0,function*(){const n=yield lt.create();return n.setConfig(h.ZBarSymbolType.ZBAR_NONE,h.ZBarConfigType.ZBAR_CFG_BINARY,1),n});let ht;const dt=(n,e)=>S(void 0,void 0,void 0,function*(){e===void 0&&(e=ht||(yield At()),ht=e);const i=e.scan(n);if(i<0)throw Error("Scan Failed");return i===0?[]:n.getSymbols()}),pt=(n,e,i,s)=>S(void 0,void 0,void 0,function*(){const u=yield Q.createFromRGBABuffer(e,i,n),A=yield dt(u,s);return u.destroy(),A});return h.ZBarImage=Q,h.ZBarScanner=lt,h.ZBarSymbol=P,h.getDefaultScanner=At,h.getInstance=H,h.scanGrayBuffer=(n,e,i,s)=>S(void 0,void 0,void 0,function*(){const u=yield Q.createFromGrayBuffer(e,i,n),A=yield dt(u,s);return u.destroy(),A}),h.scanImageData=(n,e)=>S(void 0,void 0,void 0,function*(){return yield pt(n.data.buffer,n.width,n.height,e)}),h.scanRGBABuffer=pt,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),h}({});
}());