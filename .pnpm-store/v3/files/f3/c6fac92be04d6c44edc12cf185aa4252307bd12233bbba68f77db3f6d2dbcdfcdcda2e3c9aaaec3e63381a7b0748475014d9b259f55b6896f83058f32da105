var Jj=Object.create;var uA=Object.defineProperty;var Kj=Object.getOwnPropertyDescriptor;var Lj=Object.getOwnPropertyNames;var Bj=Object.getPrototypeOf,Mj=Object.prototype.hasOwnProperty;var Dj=t=>uA(t,"__esModule",{value:!0});var y=t=>{if(typeof require!="undefined")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')};var P=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var Cj=(t,r,A)=>{if(r&&typeof r=="object"||typeof r=="function")for(let k of Lj(r))!Mj.call(t,k)&&k!=="default"&&uA(t,k,{get:()=>r[k],enumerable:!(A=Kj(r,k))||A.enumerable});return t},At=t=>Cj(Dj(uA(t!=null?Jj(Bj(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var qA=P($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.CppObject=void 0;var wA=class{constructor(r,A){this.ptr=r,this.inst=A}checkAlive(){if(!this.ptr)throw Error("Call after destroyed")}getPointer(){return this.checkAlive(),this.ptr}};$.CppObject=wA});var UA=P(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.ZBarConfigType=p.ZBarSymbolType=void 0;var jt;(function(t){t[t.ZBAR_NONE=0]="ZBAR_NONE",t[t.ZBAR_PARTIAL=1]="ZBAR_PARTIAL",t[t.ZBAR_EAN8=8]="ZBAR_EAN8",t[t.ZBAR_UPCE=9]="ZBAR_UPCE",t[t.ZBAR_ISBN10=10]="ZBAR_ISBN10",t[t.ZBAR_UPCA=12]="ZBAR_UPCA",t[t.ZBAR_EAN13=13]="ZBAR_EAN13",t[t.ZBAR_ISBN13=14]="ZBAR_ISBN13",t[t.ZBAR_I25=25]="ZBAR_I25",t[t.ZBAR_CODE39=39]="ZBAR_CODE39",t[t.ZBAR_PDF417=57]="ZBAR_PDF417",t[t.ZBAR_QRCODE=64]="ZBAR_QRCODE",t[t.ZBAR_CODE128=128]="ZBAR_CODE128",t[t.ZBAR_SYMBOL=255]="ZBAR_SYMBOL",t[t.ZBAR_ADDON2=512]="ZBAR_ADDON2",t[t.ZBAR_ADDON5=1280]="ZBAR_ADDON5",t[t.ZBAR_ADDON=1792]="ZBAR_ADDON"})(jt=p.ZBarSymbolType||(p.ZBarSymbolType={}));var tt;(function(t){t[t.ZBAR_CFG_ENABLE=0]="ZBAR_CFG_ENABLE",t[t.ZBAR_CFG_ADD_CHECK=1]="ZBAR_CFG_ADD_CHECK",t[t.ZBAR_CFG_EMIT_CHECK=2]="ZBAR_CFG_EMIT_CHECK",t[t.ZBAR_CFG_ASCII=3]="ZBAR_CFG_ASCII",t[t.ZBAR_CFG_NUM=4]="ZBAR_CFG_NUM",t[t.ZBAR_CFG_MIN_LEN=32]="ZBAR_CFG_MIN_LEN",t[t.ZBAR_CFG_MAX_LEN=33]="ZBAR_CFG_MAX_LEN",t[t.ZBAR_CFG_UNCERTAINTY=64]="ZBAR_CFG_UNCERTAINTY",t[t.ZBAR_CFG_POSITION=128]="ZBAR_CFG_POSITION",t[t.ZBAR_CFG_X_DENSITY=256]="ZBAR_CFG_X_DENSITY",t[t.ZBAR_CFG_Y_DENSITY=257]="ZBAR_CFG_Y_DENSITY"})(tt=p.ZBarConfigType||(p.ZBarConfigType={}))});var L=P(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.Symbol=void 0;var rt=UA(),lA=class{constructor(r,A){this.ptr=r,this.ptr32=r>>2,this.buf=A,this.HEAP8=new Int8Array(A),this.HEAPU32=new Uint32Array(A),this.HEAP32=new Int32Array(A)}},F=class extends lA{get type(){return this.HEAPU32[this.ptr32]}get data(){let r=this.HEAPU32[this.ptr32+4],A=this.HEAPU32[this.ptr32+5];return Int8Array.from(this.HEAP8.subarray(A,A+r))}get points(){let r=this.HEAPU32[this.ptr32+7],k=this.HEAPU32[this.ptr32+8]>>2,l=[];for(let s=0;s<r;++s){let f=this.HEAP32[k+s*2],N=this.HEAP32[k+s*2+1];l.push({x:f,y:N})}return l}get next(){let r=this.HEAPU32[this.ptr32+11];return r?new F(r,this.buf):null}get time(){return this.HEAPU32[this.ptr32+13]}get cacheCount(){return this.HEAP32[this.ptr32+14]}get quality(){return this.HEAP32[this.ptr32+15]}},YA=class extends lA{get head(){let r=this.HEAPU32[this.ptr32+2];return r?new F(r,this.buf):null}},J=class{constructor(r){this.type=r.type,this.typeName=rt.ZBarSymbolType[this.type],this.data=r.data,this.points=r.points,this.time=r.time,this.cacheCount=r.cacheCount,this.quality=r.quality}static createSymbolsFromPtr(r,A){if(r==0)return[];let l=new YA(r,A).head,s=[];for(;l!==null;)s.push(new J(l)),l=l.next;return s}decode(r){return new TextDecoder(r).decode(this.data)}};K.Symbol=J});var yA=P((St,et)=>{et.exports="./zbar.wasm-UORLJJQR.bin"});var xA=P((B,iA)=>{var aA=function(){var t=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename!="undefined"&&(t=t||__filename),function(r){r=r||{};var A=typeof r!="undefined"?r:{},k,l;A.ready=new Promise(function(j,e){k=j,l=e});var s={},f;for(f in A)A.hasOwnProperty(f)&&(s[f]=A[f]);var N=[],q="./this.program",R=function(j,e){throw e},u=typeof window=="object",o=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_="";function tA(j){return A.locateFile?A.locateFile(j,_):_+j}var rA,W,Z,BA;function MA(j){if(!(j instanceof EA)){var e=j;b("exiting due to exception: "+e)}}var T,E;I?(o?_=y("path").dirname(_)+"/":_=__dirname+"/",rA=function(e,n){return T||(T=y("fs")),E||(E=y("path")),e=E.normalize(e),T.readFileSync(e,n?null:"utf8")},Z=function(e){var n=rA(e,!0);return n.buffer||(n=new Uint8Array(n)),jj(n.buffer),n},W=function(e,n,i){T||(T=y("fs")),E||(E=y("path")),e=E.normalize(e),T.readFile(e,function(c,O){c?i(c):n(O.buffer)})},process.argv.length>1&&(q=process.argv[1].replace(/\\/g,"/")),N=process.argv.slice(2),process.on("uncaughtException",function(j){if(!(j instanceof EA))throw j}),process.on("unhandledRejection",function(j){throw j}),R=function(j,e){if(ij())throw process.exitCode=j,e;MA(e),process.exit(j)},A.inspect=function(){return"[Emscripten Module object]"}):(u||o)&&(o?_=self.location.href:typeof document!="undefined"&&document.currentScript&&(_=document.currentScript.src),t&&(_=t),_.indexOf("blob:")!==0?_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):_="",rA=function(j){var e=new XMLHttpRequest;return e.open("GET",j,!1),e.send(null),e.responseText},o&&(Z=function(j){var e=new XMLHttpRequest;return e.open("GET",j,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),W=function(j,e,n){var i=new XMLHttpRequest;i.open("GET",j,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status==200||i.status==0&&i.response){e(i.response);return}n()},i.onerror=n,i.send(null)},BA=function(j){document.title=j});var DA=A.print||console.log.bind(console),b=A.printErr||console.warn.bind(console);for(f in s)s.hasOwnProperty(f)&&(A[f]=s[f]);s=null,A.arguments&&(N=A.arguments),A.thisProgram&&(q=A.thisProgram),A.quit&&(R=A.quit);var w;A.wasmBinary&&(w=A.wasmBinary);var CA=A.noExitRuntime||!0;typeof WebAssembly!="object"&&z("no native wasm support detected");var V,NA=!1,Aj;function jj(j,e){j||z("Assertion failed: "+e)}var _A=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function RA(j,e,n){for(var i=e+n,c=e;j[c]&&!(c>=i);)++c;if(c-e>16&&j.subarray&&_A)return _A.decode(j.subarray(e,c));for(var O="";e<c;){var a=j[e++];if(!(a&128)){O+=String.fromCharCode(a);continue}var v=j[e++]&63;if((a&224)==192){O+=String.fromCharCode((a&31)<<6|v);continue}var d=j[e++]&63;if((a&240)==224?a=(a&15)<<12|v<<6|d:a=(a&7)<<18|v<<12|d<<6|j[e++]&63,a<65536)O+=String.fromCharCode(a);else{var XA=a-65536;O+=String.fromCharCode(55296|XA>>10,56320|XA&1023)}}return O}function tj(j,e){return j?RA(U,j,e):""}function rj(j,e){return j%e>0&&(j+=e-j%e),j}var mA,ej,U,nj,sj,Q,kj,uj,qj;function OA(j){mA=j,A.HEAP8=ej=new Int8Array(j),A.HEAP16=nj=new Int16Array(j),A.HEAP32=Q=new Int32Array(j),A.HEAPU8=U=new Uint8Array(j),A.HEAPU16=sj=new Uint16Array(j),A.HEAPU32=kj=new Uint32Array(j),A.HEAPF32=uj=new Float32Array(j),A.HEAPF64=qj=new Float64Array(j)}var ht=A.INITIAL_MEMORY||16777216,PA,hA=[],dA=[],gA=[],lj=!1,aj=0;function ij(){return CA||aj>0}function cj(){if(A.preRun)for(typeof A.preRun=="function"&&(A.preRun=[A.preRun]);A.preRun.length;)fj(A.preRun.shift());nA(hA)}function oj(){lj=!0,nA(dA)}function vj(){if(A.postRun)for(typeof A.postRun=="function"&&(A.postRun=[A.postRun]);A.postRun.length;)_j(A.postRun.shift());nA(gA)}function fj(j){hA.unshift(j)}function Nj(j){dA.unshift(j)}function _j(j){gA.unshift(j)}var S=0,eA=null,Y=null;function Rj(j){S++,A.monitorRunDependencies&&A.monitorRunDependencies(S)}function mj(j){if(S--,A.monitorRunDependencies&&A.monitorRunDependencies(S),S==0&&(eA!==null&&(clearInterval(eA),eA=null),Y)){var e=Y;Y=null,e()}}A.preloadedImages={},A.preloadedAudios={};function z(j){A.onAbort&&A.onAbort(j),j="Aborted("+j+")",b(j),NA=!0,Aj=1,j+=". Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(j);throw l(e),e}var Oj="data:application/octet-stream;base64,";function QA(j){return j.startsWith(Oj)}function pA(j){return j.startsWith("file://")}var m;m="zbar.wasm",QA(m)||(m=tA(m));function bA(j){try{if(j==m&&w)return new Uint8Array(w);if(Z)return Z(j);throw"both async and sync fetching of the wasm failed"}catch(e){z(e)}}function Pj(){if(!w&&(u||o)){if(typeof fetch=="function"&&!pA(m))return fetch(m,{credentials:"same-origin"}).then(function(j){if(!j.ok)throw"failed to load wasm binary file at '"+m+"'";return j.arrayBuffer()}).catch(function(){return bA(m)});if(W)return new Promise(function(j,e){W(m,function(n){j(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return bA(m)})}function hj(){var j={a:wj};function e(a,v){var d=a.exports;A.asm=d,V=A.asm.g,OA(V.buffer),PA=A.asm.s,Nj(A.asm.h),mj("wasm-instantiate")}Rj("wasm-instantiate");function n(a){e(a.instance)}function i(a){return Pj().then(function(v){return WebAssembly.instantiate(v,j)}).then(function(v){return v}).then(a,function(v){b("failed to asynchronously prepare wasm: "+v),z(v)})}function c(){return!w&&typeof WebAssembly.instantiateStreaming=="function"&&!QA(m)&&!pA(m)&&typeof fetch=="function"?fetch(m,{credentials:"same-origin"}).then(function(a){var v=WebAssembly.instantiateStreaming(a,j);return v.then(n,function(d){return b("wasm streaming compile failed: "+d),b("falling back to ArrayBuffer instantiation"),i(n)})}):i(n)}if(A.instantiateWasm)try{var O=A.instantiateWasm(j,e);return O}catch(a){return b("Module.instantiateWasm callback failed with error: "+a),!1}return c().catch(l),{}}function nA(j){for(;j.length>0;){var e=j.shift();if(typeof e=="function"){e(A);continue}var n=e.func;typeof n=="number"?e.arg===void 0?SA(n)():SA(n)(e.arg):n(e.arg===void 0?null:e.arg)}}function SA(j){return PA.get(j)}var sA;I?sA=function(){var j=process.hrtime();return j[0]*1e3+j[1]/1e6}:sA=function(){return performance.now()};var dj=!0;function gj(j){return Q[TA()>>2]=j,j}function Qj(j,e){var n;if(j===0)n=Date.now();else if((j===1||j===4)&&dj)n=sA();else return gj(28),-1;return Q[e>>2]=n/1e3|0,Q[e+4>>2]=n%1e3*1e3*1e3|0,0}function pj(j,e,n){U.copyWithin(j,e,e+n)}function bj(j){try{return V.grow(j-mA.byteLength+65535>>>16),OA(V.buffer),1}catch(e){}}function Sj(j){var e=U.length;j=j>>>0;var n=2147483648;if(j>n)return!1;for(var i=1;i<=4;i*=2){var c=e*(1+.2/i);c=Math.min(c,j+100663296);var O=Math.min(n,rj(Math.max(j,c),65536)),a=bj(O);if(a)return!0}return!1}var G={mappings:{},buffers:[null,[],[]],printChar:function(j,e){var n=G.buffers[j];e===0||e===10?((j===1?DA:b)(RA(n,0)),n.length=0):n.push(e)},varargs:void 0,get:function(){G.varargs+=4;var j=Q[G.varargs-4>>2];return j},getStr:function(j){var e=tj(j);return e},get64:function(j,e){return j}};function Tj(j){return 0}function Ej(j,e,n,i,c){}function Xj(j,e,n,i){for(var c=0,O=0;O<n;O++){var a=Q[e>>2],v=Q[e+4>>2];e+=8;for(var d=0;d<v;d++)G.printChar(j,U[a+d]);c+=v}return Q[i>>2]=c,0}var wj={f:Qj,c:pj,d:Sj,e:Tj,b:Ej,a:Xj},dt=hj(),Uj=A.___wasm_call_ctors=function(){return(Uj=A.___wasm_call_ctors=A.asm.h).apply(null,arguments)},Yj=A._ImageScanner_create=function(){return(Yj=A._ImageScanner_create=A.asm.i).apply(null,arguments)},yj=A._ImageScanner_destory=function(){return(yj=A._ImageScanner_destory=A.asm.j).apply(null,arguments)},xj=A._ImageScanner_set_config=function(){return(xj=A._ImageScanner_set_config=A.asm.k).apply(null,arguments)},Ij=A._ImageScanner_enable_cache=function(){return(Ij=A._ImageScanner_enable_cache=A.asm.l).apply(null,arguments)},Wj=A._ImageScanner_recycle_image=function(){return(Wj=A._ImageScanner_recycle_image=A.asm.m).apply(null,arguments)},Zj=A._ImageScanner_get_results=function(){return(Zj=A._ImageScanner_get_results=A.asm.n).apply(null,arguments)},Vj=A._ImageScanner_scan=function(){return(Vj=A._ImageScanner_scan=A.asm.o).apply(null,arguments)},zj=A._Image_create=function(){return(zj=A._Image_create=A.asm.p).apply(null,arguments)},Gj=A._Image_destory=function(){return(Gj=A._Image_destory=A.asm.q).apply(null,arguments)},Hj=A._Image_get_symbols=function(){return(Hj=A._Image_get_symbols=A.asm.r).apply(null,arguments)},TA=A.___errno_location=function(){return(TA=A.___errno_location=A.asm.t).apply(null,arguments)},$j=A._free=function(){return($j=A._free=A.asm.u).apply(null,arguments)},Fj=A._malloc=function(){return(Fj=A._malloc=A.asm.v).apply(null,arguments)},H;function EA(j){this.name="ExitStatus",this.message="Program terminated with exit("+j+")",this.status=j}Y=function j(){H||kA(),H||(Y=j)};function kA(j){if(j=j||N,S>0||(cj(),S>0))return;function e(){H||(H=!0,A.calledRun=!0,!NA&&(oj(),k(A),A.onRuntimeInitialized&&A.onRuntimeInitialized(),vj()))}A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),e()},1)):e()}if(A.run=kA,A.preInit)for(typeof A.preInit=="function"&&(A.preInit=[A.preInit]);A.preInit.length>0;)A.preInit.pop()();return kA(),r.ready}}();typeof B=="object"&&typeof iA=="object"?iA.exports=aA:typeof define=="function"&&define.amd?define([],function(){return aA}):typeof B=="object"&&(B.instantiate=aA)});var WA=P(X=>{"use strict";var IA=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(X,"__esModule",{value:!0});X.loadWasmInstance=void 0;var nt=IA(yA()),st=IA(xA()),kt=(t,r)=>(t!="zbar.wasm"&&console.error("Unexpected file:",t),nt.default),ut=async t=>(t.locateFile=kt,await(0,st.default)(t));X.loadWasmInstance=ut});var oA=P(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.getInstance=void 0;var qt=WA(),cA=null,lt=(async()=>{if(cA=await(0,qt.loadWasmInstance)({}),!cA)throw Error("WASM was not loaded");return cA})(),at=async()=>await lt;M.getInstance=at});var vA=P(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.Image=void 0;var it=qA(),ct=L(),ZA=oA(),VA=class extends it.CppObject{static async createFromGrayBuffer(r,A,k,l=0){let s=await(0,ZA.getInstance)(),f=s.HEAPU8,N=new Uint8Array(k),q=r*A;if(q!==N.byteLength)throw Error("dataBuf does not match width and height");let R=s._malloc(q);f.set(N,R);let u=s._Image_create(r,A,808466521,R,q,l);return new this(u,s)}static async createFromRGBABuffer(r,A,k,l=0){let s=await(0,ZA.getInstance)(),f=s.HEAPU8,N=new Uint8Array(k),q=r*A;if(q*4!==N.byteLength)throw Error("dataBuf does not match width and height");let R=s._malloc(q);for(let o=0;o<q;++o){let I=N[o*4],_=N[o*4+1],tA=N[o*4+2];f[R+o]=I*19595+_*38469+tA*7472>>16}let u=s._Image_create(r,A,808466521,R,q,l);return new this(u,s)}destroy(){this.checkAlive(),this.inst._Image_destory(this.ptr),this.ptr=0}getSymbols(){this.checkAlive();let r=this.inst._Image_get_symbols(this.ptr);return ct.Symbol.createSymbolsFromPtr(r,this.inst.HEAPU8.buffer)}};D.Image=VA});var fA=P(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.ImageScanner=void 0;var ot=qA(),vt=oA(),ft=L(),zA=class extends ot.CppObject{static async create(){let r=await(0,vt.getInstance)(),A=r._ImageScanner_create();return new this(A,r)}destroy(){this.checkAlive(),this.inst._ImageScanner_destory(this.ptr),this.ptr=0}setConfig(r,A,k){return this.checkAlive(),this.inst._ImageScanner_set_config(this.ptr,r,A,k)}enableCache(r=!0){this.checkAlive(),this.inst._ImageScanner_enable_cache(this.ptr,r)}recycleImage(r){this.checkAlive(),this.inst._ImageScanner_recycle_image(this.ptr,r.getPointer())}getResults(){this.checkAlive();let r=this.inst._ImageScanner_get_results(this.ptr);return ft.Symbol.createSymbolsFromPtr(r,this.inst.HEAPU8.buffer)}scan(r){return this.checkAlive(),this.inst._ImageScanner_scan(this.ptr,r.getPointer())}};C.ImageScanner=zA});var FA=P(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.scanImageData=h.scanRGBABuffer=h.scanGrayBuffer=h.getDefaultScanner=void 0;var GA=vA(),Nt=fA(),HA=Nt.ImageScanner.create(),_t=async()=>await HA;h.getDefaultScanner=_t;var $A=async(t,r)=>{r===void 0&&(r=await HA);let A=r.scan(t);if(A<0)throw Error("Scan Failed");return A===0?[]:t.getSymbols()},Rt=async(t,r,A,k)=>{let l=await GA.Image.createFromGrayBuffer(r,A,t),s=await $A(l,k);return l.destroy(),s};h.scanGrayBuffer=Rt;var mt=async(t,r,A,k)=>{let l=await GA.Image.createFromRGBABuffer(r,A,t),s=await $A(l,k);return l.destroy(),s};h.scanRGBABuffer=mt;var Ot=async(t,r)=>await(0,h.scanRGBABuffer)(t.data.buffer,t.width,t.height,r);h.scanImageData=Ot});var JA=P(g=>{"use strict";var Pt=g&&g.__createBinding||(Object.create?function(t,r,A,k){k===void 0&&(k=A),Object.defineProperty(t,k,{enumerable:!0,get:function(){return r[A]}})}:function(t,r,A,k){k===void 0&&(k=A),t[k]=r[A]}),AA=g&&g.__exportStar||function(t,r){for(var A in t)A!=="default"&&!Object.prototype.hasOwnProperty.call(r,A)&&Pt(r,t,A)};Object.defineProperty(g,"__esModule",{value:!0});AA(vA(),g);AA(fA(),g);AA(FA(),g);AA(L(),g)});var KA=At(JA()),jA={ZBAR_EAN2:"ean_2",ZBAR_EAN5:"ean_5",ZBAR_EAN8:"ean_8",ZBAR_UPCE:"upc_e",ZBAR_ISBN10:"isbn_10",ZBAR_UPCA:"upc_a",ZBAR_EAN13:"ean_13",ZBAR_ISBN13:"isbn_13",ZBAR_COMPOSITE:"composite",ZBAR_I25:"itf",ZBAR_DATABAR:"databar",ZBAR_DATABAR_EXP:"databar_exp",ZBAR_CODABAR:"codabar",ZBAR_CODE39:"code_39",ZBAR_CODE93:"code_93",ZBAR_CODE128:"code_128",ZBAR_PDF417:"pdf417",ZBAR_QRCODE:"qr_code",ZBAR_SQCODE:"sq_code"},LA=480,x=class{constructor(r={}){this.canvas=document.createElement("canvas"),this.canvas.width=LA,this.canvas.height=LA,this.ctx=this.canvas.getContext("2d"),this.formats=r.formats||Object.values(jA)}static getSupportedFormats(){return new Promise((r,A)=>{r(Object.values(jA))})}detect(r){return new Promise(async(A,k)=>{if(!r.width||!r.height){k("No width or height");return}(this.canvas.width!=r.width||this.canvas.height!=r.height)&&(this.canvas.width=r.width,this.canvas.height=r.height,this.ctx=this.canvas.getContext("2d")),this.ctx.drawImage(r,0,0,this.canvas.width,this.canvas.height);let l=this.ctx.getImageData(0,0,r.width,r.height),s=l.data;for(let q=0;q<s.length;q+=4){let R=parseInt((s[q]+s[q+1]+s[q+2])/3);s[q]=R,s[q+1]=R,s[q+2]=R}this.ctx.putImageData(l,0,0),l=this.ctx.getImageData(0,0,r.width,r.height);let N=(await(0,KA.scanImageData)(l)).filter(q=>!(q.points.length<2||!this.formats.includes(jA[q.typeName]))).map(q=>{let R=jA[q.typeName],u={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};return q.points.forEach(o=>{u.minX=Math.min(u.minX,o.x),u.maxX=Math.max(u.maxX,o.x),u.minY=Math.min(u.minY,o.y),u.maxY=Math.max(u.maxY,o.y)}),{boundingBox:DOMRectReadOnly.fromRect({x:u.minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}),cornerPoints:[{x:u.minX,y:u.minY},{x:u.maxX,y:u.minY},{x:u.maxX,y:u.maxY},{x:u.minX,y:u.maxY}],format:R,rawValue:q.decode(),quality:q.quality}});A(N)})}static checkBarcodeDetectorSupport(){return"BarcodeDetector"in window}static checkWebcamSupport(){return!!(navigator.mediaDevices&&!!navigator.mediaDevices.enumerateDevices)}static checkSecureContext(){return!!window.isSecureContext}static setupPolyfill(){x.checkBarcodeDetectorSupport()||(window.BarcodeDetector=x)}},yt=x;export{yt as default};
//# sourceMappingURL=BarcodeDetectorPolyfill.min.js.map
